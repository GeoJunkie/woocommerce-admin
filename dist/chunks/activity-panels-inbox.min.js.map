{"version":3,"sources":["webpack://wc.[modulename]/./client/header/activity-panel/activity-card/index.js","webpack://wc.[modulename]/./client/header/activity-panel/activity-card/placeholder.js","webpack://wc.[modulename]/./client/header/activity-panel/activity-card/style.scss?dec1","webpack://wc.[modulename]/./client/inbox-panel/action.js","webpack://wc.[modulename]/./client/inbox-panel/card.js","webpack://wc.[modulename]/./client/inbox-panel/index.js","webpack://wc.[modulename]/./client/inbox-panel/placeholder.js","webpack://wc.[modulename]/./client/inbox-panel/style.scss?06ec","webpack://wc.[modulename]/./client/lib/sanitize-html/index.js","webpack://wc.[modulename]/./client/utils/index.js"],"names":["isDateString","value","test","ActivityCard","props","actions","className","children","date","icon","subtitle","title","unread","cardClassName","classnames","actionsList","Array","isArray","dateString","moment","utc","fromNow","map","item","i","cloneElement","key","onClick","getCard","Component","propTypes","PropTypes","oneOfType","arrayOf","element","func","string","node","bool","defaultProps","ActivityCardPlaceholder","hasAction","hasDate","hasSubtitle","lines","range","number","InboxNoteAction","state","inAction","handleActionClick","bind","event","action","actionCallback","batchUpdateNotes","createNotice","noteId","triggerNoteAction","removeAllNotes","removeNote","updateNote","href","target","length","startsWith","adminUrl","preventDefault","window","open","then","__","label","is_deleted","catch","notes","note","id","setState","dismiss","url","undefined","shape","isRequired","primary","compose","withDispatch","dispatch","NOTES_STORE_NAME","InboxNoteCard","actioned_text","clickedActionText","onVisible","hasBeenSeen","isDismissModalOpen","dismissType","openDismissModal","closeDismissModal","bodyNotificationRef","createRef","toggleButtonRef","screen","getScreenName","current","addEventListener","handleBodyClick","removeEventListener","innerLink","recordEvent","note_name","name","note_title","note_content_inner_link","isVisible","note_content","content","note_type","type","onToggle","noteNameDismissConfirmation","noteNameDismissAll","note_name_dismiss_all","note_name_dismiss_confirmation","onClose","dropdownClasses","relatedTarget","ownerDoc","ownerDocument","activeElement","isClickOutsideDropdown","some","includes","handleBlur","noArrow","getDismissConfirmationButton","noteActions","index","onActionClicked","lastRead","dateCreated","date_created","dateCreatedGmt","date_created_gmt","image","isDeleted","layout","status","Date","getTime","hasImage","sanitizeHTML","renderActions","renderDismissButton","renderDismissConfirmationModal","renderEmptyCard","renderNotes","hasNotes","isBatchUpdating","notesArray","Object","keys","InboxPanel","isError","isResolving","useUserPreferences","updateUserPreferences","userPrefs","useState","activity_panel_inbox_last_read","useEffect","mountTime","now","userDataFields","actionLabel","location","reload","hasValidNotes","INBOX_QUERY","page","per_page","QUERY_DEFAULTS","pageSize","noteTypes","orderby","order","_fields","withSelect","select","getNotes","getNotesError","isNotesRequesting","Boolean","InboxNotePlaceholder","ALLOWED_TAGS","ALLOWED_ATTR","html","__html","sanitize","getUrlParams","locationSearch","substr","split","reduce","params","query","chunks","decodeURIComponent","isNaN","Number","screenName","search","path","postType","post_type","currentPage","replace","substring"],"mappings":"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","file":"chunks/activity-panels-inbox.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { cloneElement, Component } from '@wordpress/element';\nimport NoticeOutline from 'gridicons/dist/notice-outline';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport { H, Section } from '@woocommerce/components';\nimport { Button } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\n\n/**\n * Determine if the provided string is a date, as\n * formatted by wc_rest_prepare_date_response().\n *\n * @param {string} value String value\n */\nconst isDateString = ( value ) =>\n\t// PHP date format: Y-m-d\\TH:i:s.\n\t/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/.test( value );\n\nclass ActivityCard extends Component {\n\tgetCard() {\n\t\tconst {\n\t\t\tactions,\n\t\t\tclassName,\n\t\t\tchildren,\n\t\t\tdate,\n\t\t\ticon,\n\t\t\tsubtitle,\n\t\t\ttitle,\n\t\t\tunread,\n\t\t} = this.props;\n\t\tconst cardClassName = classnames(\n\t\t\t'woocommerce-activity-card',\n\t\t\tclassName\n\t\t);\n\t\tconst actionsList = Array.isArray( actions ) ? actions : [ actions ];\n\t\tconst dateString = isDateString( date )\n\t\t\t? moment.utc( date ).fromNow()\n\t\t\t: date;\n\n\t\treturn (\n\t\t\t<section className={ cardClassName }>\n\t\t\t\t{ unread && (\n\t\t\t\t\t<span className=\"woocommerce-activity-card__unread\" />\n\t\t\t\t) }\n\t\t\t\t{ icon && (\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName=\"woocommerce-activity-card__icon\"\n\t\t\t\t\t\taria-hidden\n\t\t\t\t\t>\n\t\t\t\t\t\t{ icon }\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\t\t\t\t{ title && (\n\t\t\t\t\t<header className=\"woocommerce-activity-card__header\">\n\t\t\t\t\t\t<H className=\"woocommerce-activity-card__title\">\n\t\t\t\t\t\t\t{ title }\n\t\t\t\t\t\t</H>\n\t\t\t\t\t\t{ subtitle && (\n\t\t\t\t\t\t\t<div className=\"woocommerce-activity-card__subtitle\">\n\t\t\t\t\t\t\t\t{ subtitle }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ dateString && (\n\t\t\t\t\t\t\t<span className=\"woocommerce-activity-card__date\">\n\t\t\t\t\t\t\t\t{ dateString }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</header>\n\t\t\t\t) }\n\t\t\t\t{ children && (\n\t\t\t\t\t<Section className=\"woocommerce-activity-card__body\">\n\t\t\t\t\t\t{ children }\n\t\t\t\t\t</Section>\n\t\t\t\t) }\n\t\t\t\t{ actions && (\n\t\t\t\t\t<footer className=\"woocommerce-activity-card__actions\">\n\t\t\t\t\t\t{ actionsList.map( ( item, i ) =>\n\t\t\t\t\t\t\tcloneElement( item, { key: i } )\n\t\t\t\t\t\t) }\n\t\t\t\t\t</footer>\n\t\t\t\t) }\n\t\t\t</section>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { onClick } = this.props;\n\t\tif ( onClick ) {\n\t\t\treturn (\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"woocommerce-activity-card__button\"\n\t\t\t\t\tonClick={ onClick }\n\t\t\t\t>\n\t\t\t\t\t{ this.getCard() }\n\t\t\t\t</Button>\n\t\t\t);\n\t\t}\n\t\treturn this.getCard();\n\t}\n}\n\nActivityCard.propTypes = {\n\tactions: PropTypes.oneOfType( [\n\t\tPropTypes.arrayOf( PropTypes.element ),\n\t\tPropTypes.element,\n\t] ),\n\tonClick: PropTypes.func,\n\tclassName: PropTypes.string,\n\tchildren: PropTypes.node,\n\tdate: PropTypes.string,\n\ticon: PropTypes.node,\n\tsubtitle: PropTypes.node,\n\ttitle: PropTypes.oneOfType( [ PropTypes.string, PropTypes.node ] ),\n\tunread: PropTypes.bool,\n};\n\nActivityCard.defaultProps = {\n\ticon: <NoticeOutline size={ 48 } />,\n\tunread: false,\n};\n\nexport { ActivityCard };\nexport { default as ActivityCardPlaceholder } from './placeholder';\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { Component } from '@wordpress/element';\nimport PropTypes from 'prop-types';\nimport { range } from 'lodash';\n\nclass ActivityCardPlaceholder extends Component {\n\trender() {\n\t\tconst {\n\t\t\tclassName,\n\t\t\thasAction,\n\t\t\thasDate,\n\t\t\thasSubtitle,\n\t\t\tlines,\n\t\t} = this.props;\n\t\tconst cardClassName = classnames(\n\t\t\t'woocommerce-activity-card is-loading',\n\t\t\tclassName\n\t\t);\n\n\t\treturn (\n\t\t\t<div className={ cardClassName } aria-hidden>\n\t\t\t\t<span className=\"woocommerce-activity-card__icon\">\n\t\t\t\t\t<span className=\"is-placeholder\" />\n\t\t\t\t</span>\n\t\t\t\t<div className=\"woocommerce-activity-card__header\">\n\t\t\t\t\t<div className=\"woocommerce-activity-card__title is-placeholder\" />\n\t\t\t\t\t{ hasSubtitle && (\n\t\t\t\t\t\t<div className=\"woocommerce-activity-card__subtitle is-placeholder\" />\n\t\t\t\t\t) }\n\t\t\t\t\t{ hasDate && (\n\t\t\t\t\t\t<div className=\"woocommerce-activity-card__date\">\n\t\t\t\t\t\t\t<span className=\"is-placeholder\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t\t<div className=\"woocommerce-activity-card__body\">\n\t\t\t\t\t{ range( lines ).map( ( i ) => (\n\t\t\t\t\t\t<span className=\"is-placeholder\" key={ i } />\n\t\t\t\t\t) ) }\n\t\t\t\t</div>\n\t\t\t\t{ hasAction && (\n\t\t\t\t\t<div className=\"woocommerce-activity-card__actions\">\n\t\t\t\t\t\t<span className=\"is-placeholder\" />\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nActivityCardPlaceholder.propTypes = {\n\tclassName: PropTypes.string,\n\thasAction: PropTypes.bool,\n\thasDate: PropTypes.bool,\n\thasSubtitle: PropTypes.bool,\n\tlines: PropTypes.number,\n};\n\nActivityCardPlaceholder.defaultProps = {\n\thasAction: false,\n\thasDate: false,\n\thasSubtitle: false,\n\tlines: 1,\n};\n\nexport default ActivityCardPlaceholder;\n","// extracted by mini-css-extract-plugin","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { withDispatch } from '@wordpress/data';\nimport PropTypes from 'prop-types';\nimport { ADMIN_URL as adminUrl } from '@woocommerce/wc-admin-settings';\nimport { NOTES_STORE_NAME } from '@woocommerce/data';\n\nclass InboxNoteAction extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tinAction: false,\n\t\t};\n\n\t\tthis.handleActionClick = this.handleActionClick.bind( this );\n\t}\n\n\thandleActionClick( event ) {\n\t\tconst {\n\t\t\taction,\n\t\t\tactionCallback,\n\t\t\tbatchUpdateNotes,\n\t\t\tcreateNotice,\n\t\t\tnoteId,\n\t\t\ttriggerNoteAction,\n\t\t\tremoveAllNotes,\n\t\t\tremoveNote,\n\t\t\tonClick,\n\t\t\tupdateNote,\n\t\t} = this.props;\n\t\tconst href = event.target.href || '';\n\t\tlet inAction = true;\n\n\t\tif ( href.length && ! href.startsWith( adminUrl ) ) {\n\t\t\tevent.preventDefault();\n\t\t\tinAction = false; // link buttons shouldn't be \"busy\".\n\t\t\twindow.open( href, '_blank' );\n\t\t}\n\n\t\tif ( ! action ) {\n\t\t\tif ( noteId ) {\n\t\t\t\tremoveNote( noteId )\n\t\t\t\t\t.then( () => {\n\t\t\t\t\t\tcreateNotice(\n\t\t\t\t\t\t\t'success',\n\t\t\t\t\t\t\t__( 'Message dismissed', 'woocommerce-admin' ),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tactions: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tlabel: __(\n\t\t\t\t\t\t\t\t\t\t\t'Undo',\n\t\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\t\t\tupdateNote( noteId, {\n\t\t\t\t\t\t\t\t\t\t\t\tis_deleted: 0,\n\t\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t} )\n\t\t\t\t\t.catch( () => {\n\t\t\t\t\t\tcreateNotice(\n\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t'Message could not be dismissed',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tremoveAllNotes()\n\t\t\t\t\t.then( ( notes ) => {\n\t\t\t\t\t\tcreateNotice(\n\t\t\t\t\t\t\t'success',\n\t\t\t\t\t\t\t__( 'All messages dismissed', 'woocommerce-admin' ),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tactions: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tlabel: __(\n\t\t\t\t\t\t\t\t\t\t\t'Undo',\n\t\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\t\t\tbatchUpdateNotes(\n\t\t\t\t\t\t\t\t\t\t\t\tnotes.map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t( note ) => note.id\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tis_deleted: 0,\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t} )\n\t\t\t\t\t.catch( () => {\n\t\t\t\t\t\tcreateNotice(\n\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t'Message could not be dismissed',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t} );\n\t\t\t}\n\n\t\t\tactionCallback( true );\n\t\t} else {\n\t\t\tthis.setState( { inAction }, () => {\n\t\t\t\ttriggerNoteAction( noteId, action.id );\n\n\t\t\t\tif ( !! onClick ) {\n\t\t\t\t\tonClick();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { action, dismiss, label } = this.props;\n\n\t\treturn (\n\t\t\t<Button\n\t\t\t\tisSecondary\n\t\t\t\tisBusy={ this.state.inAction }\n\t\t\t\tdisabled={ this.state.inAction }\n\t\t\t\thref={\n\t\t\t\t\taction && action.url && action.url.length\n\t\t\t\t\t\t? action.url\n\t\t\t\t\t\t: undefined\n\t\t\t\t}\n\t\t\t\tonClick={ this.handleActionClick }\n\t\t\t>\n\t\t\t\t{ dismiss ? label : action.label }\n\t\t\t</Button>\n\t\t);\n\t}\n}\n\nInboxNoteAction.propTypes = {\n\tnoteId: PropTypes.number,\n\tlabel: PropTypes.string,\n\tdismiss: PropTypes.bool,\n\tactionCallback: PropTypes.func,\n\taction: PropTypes.shape( {\n\t\tid: PropTypes.number.isRequired,\n\t\turl: PropTypes.string,\n\t\tlabel: PropTypes.string.isRequired,\n\t\tprimary: PropTypes.bool.isRequired,\n\t} ),\n\tonClick: PropTypes.func,\n};\n\nexport default compose(\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst {\n\t\t\tbatchUpdateNotes,\n\t\t\tremoveAllNotes,\n\t\t\tremoveNote,\n\t\t\tupdateNote,\n\t\t\ttriggerNoteAction,\n\t\t} = dispatch( NOTES_STORE_NAME );\n\n\t\treturn {\n\t\t\tbatchUpdateNotes,\n\t\t\tcreateNotice,\n\t\t\tremoveAllNotes,\n\t\t\tremoveNote,\n\t\t\ttriggerNoteAction,\n\t\t\tupdateNote,\n\t\t};\n\t} )\n)( InboxNoteAction );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, createRef } from '@wordpress/element';\nimport { Button, Dropdown, Modal } from '@wordpress/components';\nimport PropTypes from 'prop-types';\nimport VisibilitySensor from 'react-visibility-sensor';\nimport moment from 'moment';\nimport classnames from 'classnames';\nimport { H, Section } from '@woocommerce/components';\nimport { recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nimport NoteAction from './action';\nimport sanitizeHTML from '../lib/sanitize-html';\nimport './style.scss';\nimport { getScreenName } from '../utils';\n\nclass InboxNoteCard extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.onVisible = this.onVisible.bind( this );\n\t\tthis.hasBeenSeen = false;\n\t\tthis.state = {\n\t\t\tisDismissModalOpen: false,\n\t\t\tdismissType: null,\n\t\t\tclickedActionText: null,\n\t\t};\n\t\tthis.openDismissModal = this.openDismissModal.bind( this );\n\t\tthis.closeDismissModal = this.closeDismissModal.bind( this );\n\t\tthis.bodyNotificationRef = createRef();\n\t\tthis.toggleButtonRef = createRef();\n\t\tthis.screen = getScreenName();\n\t}\n\n\tcomponentDidMount() {\n\t\tif ( this.bodyNotificationRef.current ) {\n\t\t\tthis.bodyNotificationRef.current.addEventListener(\n\t\t\t\t'click',\n\t\t\t\t( event ) => this.handleBodyClick( event, this.props )\n\t\t\t);\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif ( this.bodyNotificationRef.current ) {\n\t\t\tthis.bodyNotificationRef.current.removeEventListener(\n\t\t\t\t'click',\n\t\t\t\t( event ) => this.handleBodyClick( event, this.props )\n\t\t\t);\n\t\t}\n\t}\n\n\thandleBodyClick( event, props ) {\n\t\tconst innerLink = event.target.href;\n\t\tif ( innerLink ) {\n\t\t\tconst { note } = props;\n\n\t\t\trecordEvent( 'wcadmin_inbox_action_click', {\n\t\t\t\tnote_name: note.name,\n\t\t\t\tnote_title: note.title,\n\t\t\t\tnote_content_inner_link: innerLink,\n\t\t\t} );\n\t\t}\n\t}\n\n\t// Trigger a view Tracks event when the note is seen.\n\tonVisible( isVisible ) {\n\t\tif ( isVisible && ! this.hasBeenSeen ) {\n\t\t\tconst { note } = this.props;\n\n\t\t\trecordEvent( 'inbox_note_view', {\n\t\t\t\tnote_content: note.content,\n\t\t\t\tnote_name: note.name,\n\t\t\t\tnote_title: note.title,\n\t\t\t\tnote_type: note.type,\n\t\t\t\tscreen: this.screen,\n\t\t\t} );\n\n\t\t\tthis.hasBeenSeen = true;\n\t\t}\n\t}\n\n\topenDismissModal( type, onToggle ) {\n\t\tthis.setState( {\n\t\t\tisDismissModalOpen: true,\n\t\t\tdismissType: type,\n\t\t} );\n\t\tonToggle();\n\t}\n\n\tcloseDismissModal( noteNameDismissConfirmation ) {\n\t\tconst { dismissType } = this.state;\n\t\tconst { note } = this.props;\n\t\tconst noteNameDismissAll = dismissType === 'all' ? true : false;\n\n\t\trecordEvent( 'inbox_action_dismiss', {\n\t\t\tnote_name: note.name,\n\t\t\tnote_title: note.title,\n\t\t\tnote_name_dismiss_all: noteNameDismissAll,\n\t\t\tnote_name_dismiss_confirmation:\n\t\t\t\tnoteNameDismissConfirmation || false,\n\t\t\tscreen: this.screen,\n\t\t} );\n\n\t\tthis.setState( {\n\t\t\tisDismissModalOpen: false,\n\t\t} );\n\t}\n\n\thandleBlur( event, onClose ) {\n\t\tconst dropdownClasses = [\n\t\t\t'woocommerce-admin-dismiss-notification',\n\t\t\t'components-popover__content',\n\t\t];\n\t\t// This line is for IE compatibility.\n\t\tlet relatedTarget;\n\t\tif ( event.relatedTarget ) {\n\t\t\trelatedTarget = event.relatedTarget;\n\t\t} else if ( this.toggleButtonRef.current ) {\n\t\t\tconst ownerDoc = this.toggleButtonRef.current.ownerDocument;\n\t\t\trelatedTarget = ownerDoc ? ownerDoc.activeElement : null;\n\t\t}\n\t\tconst isClickOutsideDropdown = relatedTarget\n\t\t\t? dropdownClasses.some( ( className ) =>\n\t\t\t\t\trelatedTarget.className.includes( className )\n\t\t\t  )\n\t\t\t: false;\n\t\tif ( isClickOutsideDropdown ) {\n\t\t\tevent.preventDefault();\n\t\t} else {\n\t\t\tonClose();\n\t\t}\n\t}\n\n\trenderDismissButton() {\n\t\tconst { clickedActionText } = this.state;\n\n\t\tif ( clickedActionText ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Dropdown\n\t\t\t\tcontentClassName=\"woocommerce-admin-dismiss-dropdown\"\n\t\t\t\tposition=\"bottom right\"\n\t\t\t\trenderToggle={ ( { onClose, onToggle } ) => (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisTertiary\n\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\tref={ this.toggleButtonRef }\n\t\t\t\t\t\tonBlur={ ( event ) =>\n\t\t\t\t\t\t\tthis.handleBlur( event, onClose )\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Dismiss', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t\tfocusOnMount={ false }\n\t\t\t\tpopoverProps={ { noArrow: true } }\n\t\t\t\trenderContent={ ( { onToggle } ) => (\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName=\"woocommerce-admin-dismiss-notification\"\n\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\tthis.openDismissModal( 'this', onToggle )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t'Dismiss this message',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName=\"woocommerce-admin-dismiss-notification\"\n\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\tthis.openDismissModal( 'all', onToggle )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t'Dismiss all messages',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t) }\n\t\t\t/>\n\t\t);\n\t}\n\n\tgetDismissConfirmationButton() {\n\t\tconst { note } = this.props;\n\t\tconst { dismissType } = this.state;\n\t\treturn (\n\t\t\t<NoteAction\n\t\t\t\tkey={ note.id }\n\t\t\t\tnoteId={ dismissType === 'all' ? null : note.id }\n\t\t\t\tlabel={ __( \"Yes, I'm sure\", 'woocommerce-admin' ) }\n\t\t\t\tactionCallback={ this.closeDismissModal }\n\t\t\t\tdismiss={ true }\n\t\t\t\tscreen={ this.screen }\n\t\t\t/>\n\t\t);\n\t}\n\n\trenderDismissConfirmationModal() {\n\t\treturn (\n\t\t\t<Modal\n\t\t\t\ttitle={ <>{ __( 'Are you sure?', 'woocommerce-admin' ) }</> }\n\t\t\t\tonRequestClose={ () => this.closeDismissModal() }\n\t\t\t\tclassName=\"woocommerce-inbox-dismiss-confirmation_modal\"\n\t\t\t>\n\t\t\t\t<div className=\"woocommerce-inbox-dismiss-confirmation_wrapper\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Dismissed messages cannot be viewed again',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t\t<div className=\"woocommerce-inbox-dismiss-confirmation_buttons\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\t\tonClick={ () => this.closeDismissModal() }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Cancel', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{ this.getDismissConfirmationButton() }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t);\n\t}\n\n\trenderActions( note ) {\n\t\tconst { actions: noteActions, id: noteId } = note;\n\t\tconst { clickedActionText } = this.state;\n\n\t\tif ( !! clickedActionText ) {\n\t\t\treturn clickedActionText;\n\t\t}\n\n\t\tif ( ! noteActions ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ noteActions.map( ( action, index ) => (\n\t\t\t\t\t<NoteAction\n\t\t\t\t\t\tkey={ index }\n\t\t\t\t\t\tnoteId={ noteId }\n\t\t\t\t\t\taction={ action }\n\t\t\t\t\t\tonClick={ () => this.onActionClicked( action ) }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t</>\n\t\t);\n\t}\n\n\tonActionClicked = ( action ) => {\n\t\tif ( ! action.actioned_text ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tclickedActionText: action.actioned_text,\n\t\t} );\n\t};\n\n\trender() {\n\t\tconst { lastRead, note } = this.props;\n\t\tconst { isDismissModalOpen } = this.state;\n\t\tconst {\n\t\t\tcontent,\n\t\t\tdate_created: dateCreated,\n\t\t\tdate_created_gmt: dateCreatedGmt,\n\t\t\timage,\n\t\t\tis_deleted: isDeleted,\n\t\t\tlayout,\n\t\t\tstatus,\n\t\t\ttitle,\n\t\t} = note;\n\n\t\tif ( isDeleted ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst unread =\n\t\t\t! lastRead ||\n\t\t\t! dateCreatedGmt ||\n\t\t\tnew Date( dateCreatedGmt + 'Z' ).getTime() > lastRead;\n\t\tconst date = dateCreated;\n\t\tconst hasImage = layout !== 'plain' && layout !== '';\n\t\tconst cardClassName = classnames( 'woocommerce-inbox-message', layout, {\n\t\t\t'message-is-unread': unread && status === 'unactioned',\n\t\t} );\n\n\t\treturn (\n\t\t\t<VisibilitySensor onChange={ this.onVisible }>\n\t\t\t\t<section className={ cardClassName }>\n\t\t\t\t\t{ hasImage && (\n\t\t\t\t\t\t<div className=\"woocommerce-inbox-message__image\">\n\t\t\t\t\t\t\t<img src={ image } alt=\"\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t\t<div className=\"woocommerce-inbox-message__wrapper\">\n\t\t\t\t\t\t<div className=\"woocommerce-inbox-message__content\">\n\t\t\t\t\t\t\t{ unread && (\n\t\t\t\t\t\t\t\t<div className=\"woocommerce-inbox-message__unread-indicator\" />\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ date && (\n\t\t\t\t\t\t\t\t<span className=\"woocommerce-inbox-message__date\">\n\t\t\t\t\t\t\t\t\t{ moment.utc( date ).fromNow() }\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t<H className=\"woocommerce-inbox-message__title\">\n\t\t\t\t\t\t\t\t{ title }\n\t\t\t\t\t\t\t</H>\n\t\t\t\t\t\t\t<Section className=\"woocommerce-inbox-message__text\">\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={ sanitizeHTML(\n\t\t\t\t\t\t\t\t\t\tcontent\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\tref={ this.bodyNotificationRef }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Section>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"woocommerce-inbox-message__actions\">\n\t\t\t\t\t\t\t{ this.renderActions( note ) }\n\t\t\t\t\t\t\t{ this.renderDismissButton() }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{ isDismissModalOpen &&\n\t\t\t\t\t\tthis.renderDismissConfirmationModal() }\n\t\t\t\t</section>\n\t\t\t</VisibilitySensor>\n\t\t);\n\t}\n}\n\nInboxNoteCard.propTypes = {\n\tnote: PropTypes.shape( {\n\t\tid: PropTypes.number,\n\t\tstatus: PropTypes.string,\n\t\ttitle: PropTypes.string,\n\t\tcontent: PropTypes.string,\n\t\tdate_created: PropTypes.string,\n\t\tdate_created_gmt: PropTypes.string,\n\t\tactions: PropTypes.arrayOf(\n\t\t\tPropTypes.shape( {\n\t\t\t\tid: PropTypes.number.isRequired,\n\t\t\t\turl: PropTypes.string,\n\t\t\t\tlabel: PropTypes.string.isRequired,\n\t\t\t\tprimary: PropTypes.bool.isRequired,\n\t\t\t} )\n\t\t),\n\t\tlayout: PropTypes.string,\n\t\timage: PropTypes.string,\n\t\tis_deleted: PropTypes.bool,\n\t} ),\n\tlastRead: PropTypes.number,\n};\n\nexport default InboxNoteCard;\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useEffect, useState } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { EmptyContent, Section } from '@woocommerce/components';\nimport {\n\tNOTES_STORE_NAME,\n\tuseUserPreferences,\n\tQUERY_DEFAULTS,\n} from '@woocommerce/data';\nimport { withSelect } from '@wordpress/data';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\n\n/**\n * Internal dependencies\n */\nimport { ActivityCard } from '../header/activity-panel/activity-card';\nimport InboxNotePlaceholder from './placeholder';\nimport InboxNoteCard from './card';\nimport { hasValidNotes } from './utils';\n\nconst renderEmptyCard = () => (\n\t<ActivityCard\n\t\tclassName=\"woocommerce-empty-activity-card\"\n\t\ttitle={ __( 'Your inbox is empty', 'woocommerce-admin' ) }\n\t\ticon={ false }\n\t>\n\t\t{ __(\n\t\t\t'As things begin to happen in your store your inbox will start to fill up. ' +\n\t\t\t\t\"You'll see things like achievements, new feature announcements, extension recommendations and more!\",\n\t\t\t'woocommerce-admin'\n\t\t) }\n\t</ActivityCard>\n);\n\nconst renderNotes = ( { hasNotes, isBatchUpdating, lastRead, notes } ) => {\n\tif ( isBatchUpdating ) {\n\t\treturn;\n\t}\n\n\tif ( ! hasNotes ) {\n\t\treturn renderEmptyCard();\n\t}\n\n\tconst notesArray = Object.keys( notes ).map( ( key ) => notes[ key ] );\n\n\treturn (\n\t\t<TransitionGroup role=\"menu\">\n\t\t\t{ notesArray.map( ( note ) => {\n\t\t\t\tconst { id: noteId, is_deleted: isDeleted } = note;\n\t\t\t\tif ( isDeleted ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<CSSTransition\n\t\t\t\t\t\tkey={ noteId }\n\t\t\t\t\t\ttimeout={ 500 }\n\t\t\t\t\t\tclassNames=\"woocommerce-inbox-message\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<InboxNoteCard\n\t\t\t\t\t\t\tkey={ noteId }\n\t\t\t\t\t\t\tnote={ note }\n\t\t\t\t\t\t\tlastRead={ lastRead }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CSSTransition>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</TransitionGroup>\n\t);\n};\n\nconst InboxPanel = ( props ) => {\n\tconst { isError, isResolving, isBatchUpdating, notes } = props;\n\tconst { updateUserPreferences, ...userPrefs } = useUserPreferences();\n\tconst [ lastRead ] = useState( userPrefs.activity_panel_inbox_last_read );\n\n\tuseEffect( () => {\n\t\tconst mountTime = Date.now();\n\n\t\tconst userDataFields = {\n\t\t\tactivity_panel_inbox_last_read: mountTime,\n\t\t};\n\t\tupdateUserPreferences( userDataFields );\n\t}, [] );\n\n\tif ( isError ) {\n\t\tconst title = __(\n\t\t\t'There was an error getting your inbox. Please try again.',\n\t\t\t'woocommerce-admin'\n\t\t);\n\t\tconst actionLabel = __( 'Reload', 'woocommerce-admin' );\n\t\tconst actionCallback = () => {\n\t\t\t// @todo Add tracking for how often an error is displayed, and the reload action is clicked.\n\t\t\twindow.location.reload();\n\t\t};\n\n\t\treturn (\n\t\t\t<EmptyContent\n\t\t\t\ttitle={ title }\n\t\t\t\tactionLabel={ actionLabel }\n\t\t\t\tactionURL={ null }\n\t\t\t\tactionCallback={ actionCallback }\n\t\t\t/>\n\t\t);\n\t}\n\n\tconst hasNotes = hasValidNotes( notes );\n\n\t// @todo After having a pagination implemented we should call the method \"getNotes\" with a different query since\n\t// the current one is only getting 25 notes and the count of unread notes only will refer to this 25 and not all the existing ones.\n\treturn (\n\t\t<>\n\t\t\t<div className=\"woocommerce-homepage-notes-wrapper\">\n\t\t\t\t{ ( isResolving || isBatchUpdating ) && (\n\t\t\t\t\t<Section>\n\t\t\t\t\t\t<InboxNotePlaceholder className=\"banner message-is-unread\" />\n\t\t\t\t\t</Section>\n\t\t\t\t) }\n\t\t\t\t<Section>\n\t\t\t\t\t{ ! isResolving &&\n\t\t\t\t\t\t! isBatchUpdating &&\n\t\t\t\t\t\trenderNotes( {\n\t\t\t\t\t\t\thasNotes,\n\t\t\t\t\t\t\tisBatchUpdating,\n\t\t\t\t\t\t\tlastRead,\n\t\t\t\t\t\t\tnotes,\n\t\t\t\t\t\t} ) }\n\t\t\t\t</Section>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nconst INBOX_QUERY = {\n\tpage: 1,\n\tper_page: QUERY_DEFAULTS.pageSize,\n\tstatus: 'unactioned',\n\ttype: QUERY_DEFAULTS.noteTypes,\n\torderby: 'date',\n\torder: 'desc',\n\t_fields: [\n\t\t'id',\n\t\t'name',\n\t\t'title',\n\t\t'content',\n\t\t'type',\n\t\t'status',\n\t\t'actions',\n\t\t'date_created',\n\t\t'date_created_gmt',\n\t\t'layout',\n\t\t'image',\n\t\t'is_deleted',\n\t],\n};\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetNotes,\n\t\t\tgetNotesError,\n\t\t\tisResolving,\n\t\t\tisNotesRequesting,\n\t\t} = select( NOTES_STORE_NAME );\n\n\t\treturn {\n\t\t\tnotes: getNotes( INBOX_QUERY ),\n\t\t\tisError: Boolean( getNotesError( 'getNotes', [ INBOX_QUERY ] ) ),\n\t\t\tisResolving: isResolving( 'getNotes', [ INBOX_QUERY ] ),\n\t\t\tisBatchUpdating: isNotesRequesting( 'batchUpdateNotes' ),\n\t\t};\n\t} )\n)( InboxPanel );\n","/**\n * External dependencies\n */\nimport { Component } from '@wordpress/element';\nimport PropTypes from 'prop-types';\n\nclass InboxNotePlaceholder extends Component {\n\trender() {\n\t\tconst { className } = this.props;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={ `woocommerce-inbox-message is-placeholder ${ className }` }\n\t\t\t\taria-hidden\n\t\t\t>\n\t\t\t\t<div className=\"woocommerce-inbox-message__wrapper\">\n\t\t\t\t\t<div className=\"woocommerce-inbox-message__content\">\n\t\t\t\t\t\t<div className=\"woocommerce-inbox-message__date\">\n\t\t\t\t\t\t\t<div className=\"sixth-line\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"woocommerce-inbox-message__title\">\n\t\t\t\t\t\t\t<div className=\"line\" />\n\t\t\t\t\t\t\t<div className=\"line\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"woocommerce-inbox-message__text\">\n\t\t\t\t\t\t\t<div className=\"line\" />\n\t\t\t\t\t\t\t<div className=\"third-line\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"woocommerce-inbox-message__actions\">\n\t\t\t\t\t\t<div className=\"fifth-line\" />\n\t\t\t\t\t\t<div className=\"fifth-line\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nInboxNotePlaceholder.propTypes = {\n\tclassName: PropTypes.string,\n};\n\nexport default InboxNotePlaceholder;\n","// extracted by mini-css-extract-plugin","/**\n * External dependencies\n */\nimport { sanitize } from 'dompurify';\n\nexport const ALLOWED_TAGS = [ 'a', 'b', 'em', 'i', 'strong', 'p', 'br' ];\nexport const ALLOWED_ATTR = [ 'target', 'href', 'rel', 'name', 'download' ];\n\nexport default ( html ) => {\n\treturn {\n\t\t__html: sanitize( html, { ALLOWED_TAGS, ALLOWED_ATTR } ),\n\t};\n};\n","/**\n * Get the URL params.\n *\n * @param {string} locationSearch - Querystring part of a URL, including the question mark (?).\n * @return {Object} - URL params.\n */\nexport function getUrlParams( locationSearch ) {\n\tif ( locationSearch ) {\n\t\treturn locationSearch\n\t\t\t.substr( 1 )\n\t\t\t.split( '&' )\n\t\t\t.reduce( ( params, query ) => {\n\t\t\t\tconst chunks = query.split( '=' );\n\t\t\t\tconst key = chunks[ 0 ];\n\t\t\t\tlet value = decodeURIComponent( chunks[ 1 ] );\n\t\t\t\tvalue = isNaN( Number( value ) ) ? value : Number( value );\n\t\t\t\treturn ( params[ key ] = value ), params;\n\t\t\t}, {} );\n\t}\n\treturn {};\n}\n\n/**\n * Get the current screen name.\n *\n * @return {string} - Screen name.\n */\nexport function getScreenName() {\n\tlet screenName = '';\n\tconst { page, path, post_type: postType } = getUrlParams(\n\t\twindow.location.search\n\t);\n\tif ( page ) {\n\t\tconst currentPage = page === 'wc-admin' ? 'home_screen' : page;\n\t\tscreenName = path\n\t\t\t? path.replace( /\\//g, '_' ).substring( 1 )\n\t\t\t: currentPage;\n\t} else if ( postType ) {\n\t\tscreenName = postType;\n\t}\n\treturn screenName;\n}\n"],"sourceRoot":""}