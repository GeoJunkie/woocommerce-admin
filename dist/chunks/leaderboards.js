(window.__wcAdmin_webpackJsonp=window.__wcAdmin_webpackJsonp||[]).push([[35],{562:function(e,t,r){"use strict";var a=r(0),n=r(2),o=r(1),s=r.n(o),l=r(40);function c(e){var t=e.className,r=Object(n.__)("There was an error getting your stats. Please try again.","woocommerce-admin"),o=Object(n.__)("Reload","woocommerce-admin");return Object(a.createElement)(l.EmptyContent,{className:t,title:r,actionLabel:o,actionCallback:function(){window.location.reload()}})}c.propTypes={className:s.a.string},t.a=c},573:function(e,t,r){"use strict";var a=r(101),n=["a","b","em","i","strong","p","br"],o=["target","href","rel","name","download"];t.a=function(e){return{__html:Object(a.sanitize)(e,{ALLOWED_TAGS:n,ALLOWED_ATTR:o})}}},658:function(e,t,r){},659:function(e,t,r){},677:function(e,t,r){"use strict";r.r(t);var a=r(18),n=r.n(a),o=r(26),s=r.n(o),l=r(0),c=r(2),i=r(25),d=r(1),u=r.n(d),m=r(4),b=r(11),f=r(40),p=r(21),h=r(28),g=r(29),w=r(13),O=r.n(w),_=r(14),y=r.n(_),j=r(15),v=r.n(j),E=r(16),T=r.n(E),R=r(9),k=r.n(R),L=r(22),q=r(37),C=r(562),S=r(573);r(658);function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=k()(e);if(t){var n=k()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return T()(this,r)}}var I=function(e){v()(r,e);var t=B(r);function r(){return O()(this,r),t.apply(this,arguments)}return y()(r,[{key:"getFormattedHeaders",value:function(){return this.props.headers.map((function(e,t){return{isLeftAligned:0===t,hiddenByDefault:!1,isSortable:!1,key:e.label,label:e.label}}))}},{key:"getFormattedRows",value:function(){return this.props.rows.map((function(e){return e.map((function(e){return{display:Object(l.createElement)("div",{dangerouslySetInnerHTML:Object(S.a)(e.display)}),value:e.value}}))}))}},{key:"render",value:function(){var e=this.props,t=e.isRequesting,r=e.isError,a=e.totalRows,n=e.title,o="woocommerce-leaderboard";if(r)return Object(l.createElement)(C.a,{className:o});var s=this.getFormattedRows();return t||0!==s.length?Object(l.createElement)(f.TableCard,{className:o,headers:this.getFormattedHeaders(),isLoading:t,rows:s,rowsPerPage:a,showMenu:!1,title:n,totalRows:a}):Object(l.createElement)(m.Card,{className:o},Object(l.createElement)(m.CardHeader,null,Object(l.createElement)(q.Text,{variant:"title.small",as:"h3"},n)),Object(l.createElement)(m.CardBody,{size:null},Object(l.createElement)(f.EmptyTable,null,Object(c.__)("No data recorded for the selected time period.","woocommerce-admin"))))}}]),r}(l.Component);I.propTypes={headers:u.a.arrayOf(u.a.shape({label:u.a.string})),id:u.a.string.isRequired,query:u.a.object,rows:u.a.arrayOf(u.a.arrayOf(u.a.shape({display:u.a.node,value:u.a.oneOfType([u.a.string,u.a.number,u.a.bool])}))).isRequired,title:u.a.string.isRequired,totalRows:u.a.number.isRequired},I.defaultProps={rows:[],isError:!1,isRequesting:!1};var N=Object(i.compose)(Object(b.withSelect)((function(e,t){var r=t.id,a=t.query,n=t.totalRows,o=t.filters,s=e(p.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings").woocommerce_default_date_range,l=Object(p.getFilterQuery)({filters:o,query:a}),c={id:r,per_page:n,persisted_query:Object(L.getPersistedQuery)(a),query:a,select:e,defaultDateRange:s,filterQuery:l};return Object(p.getLeaderboard)(c)})))(I),A=(r(659),function(e){var t=e.allLeaderboards,r=e.controls,a=e.isFirst,o=e.isLast,i=e.hiddenBlocks,d=e.onMove,u=e.onRemove,b=e.onTitleBlur,h=e.onTitleChange,w=e.onToggleHiddenBlock,O=e.query,_=e.title,y=e.titleInput,j=e.filters,v=Object(p.useUserPreferences)(),E=v.updateUserPreferences,T=s()(v,["updateUserPreferences"]),R=Object(l.useState)(parseInt(T.dashboard_leaderboard_rows||5,10)),k=n()(R,2),L=k[0],q=k[1],C=function(e){q(parseInt(e,10));var t={dashboard_leaderboard_rows:parseInt(e,10)};E(t)};return Object(l.createElement)(l.Fragment,null,Object(l.createElement)("div",{className:"woocommerce-dashboard__dashboard-leaderboards"},Object(l.createElement)(f.SectionHeader,{title:_||Object(c.__)("Leaderboards","woocommerce-admin"),menu:Object(l.createElement)(f.EllipsisMenu,{label:Object(c.__)("Choose which leaderboards to display and other settings","woocommerce-admin"),renderContent:function(e){var n=e.onToggle;return Object(l.createElement)(l.Fragment,null,Object(l.createElement)(f.MenuTitle,null,Object(c.__)("Leaderboards","woocommerce-admin")),function(e){var t=e.allLeaderboards,r=e.hiddenBlocks,a=e.onToggleHiddenBlock;return t.map((function(e){var t=!r.includes(e.id);return Object(l.createElement)(f.MenuItem,{checked:t,isCheckbox:!0,isClickable:!0,key:e.id,onInvoke:function(){a(e.id)(),Object(g.recordEvent)("dash_leaderboards_toggle",{status:t?"off":"on",key:e.id})}},e.label)}))}({allLeaderboards:t,hiddenBlocks:i,onToggleHiddenBlock:w}),Object(l.createElement)(m.SelectControl,{className:"woocommerce-dashboard__dashboard-leaderboards__select",label:Object(c.__)("Rows Per Table","woocommerce-admin"),value:L,options:Array.from({length:20},(function(e,t){return{v:t+1,label:t+1}})),onChange:C}),window.wcAdminFeatures["analytics-dashboard/customizable"]&&Object(l.createElement)(r,{onToggle:n,onMove:d,onRemove:u,isFirst:a,isLast:o,onTitleBlur:b,onTitleChange:h,titleInput:y}))}})}),Object(l.createElement)("div",{className:"woocommerce-dashboard__columns"},function(e){var t=e.allLeaderboards,r=e.hiddenBlocks,a=e.query,n=e.rowsPerTable,o=e.filters;return t.map((function(e){if(!r.includes(e.id))return Object(l.createElement)(N,{headers:e.headers,id:e.id,key:e.id,query:a,title:e.label,totalRows:n,filters:o})}))}({allLeaderboards:t,hiddenBlocks:i,query:O,rowsPerTable:L,filters:j}))))});A.propTypes={query:u.a.object.isRequired};t.default=Object(i.compose)(Object(b.withSelect)((function(e){var t=e(p.ITEMS_STORE_NAME),r=t.getItems,a=t.getItemsError;return{allLeaderboards:Object(h.h)("dataEndpoints",{leaderboards:[]}).leaderboards,getItems:r,getItemsError:a}})))(A)}}]);