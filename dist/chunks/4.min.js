(window.__wcAdmin_webpackJsonp=window.__wcAdmin_webpackJsonp||[]).push([[4],{578:function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return x}));var c=n(13),a=n.n(c),o=n(14),r=n.n(o),i=n(15),s=n.n(i),l=n(16),m=n.n(l),u=n(9),d=n.n(u),f=n(0),p=n(8),b=n.n(p),_=n(98),v=n.n(_),h=n(17),y=n.n(h),O=n(1),N=n.n(O),j=n(34),w=n(4),g=(n(609),n(3));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,c=d()(e);if(t){var a=d()(this).constructor;n=Reflect.construct(c,arguments,a)}else n=c.apply(this,arguments);return m()(this,n)}}var k=function(e){s()(n,e);var t=E(n);function n(){return a()(this,n),t.apply(this,arguments)}return r()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.hasAction,c=e.hasDate,a=e.hasSubtitle,o=e.lines,r=b()("woocommerce-activity-card is-loading",t);return Object(f.createElement)("div",{className:r,"aria-hidden":!0},Object(f.createElement)("span",{className:"woocommerce-activity-card__icon"},Object(f.createElement)("span",{className:"is-placeholder"})),Object(f.createElement)("div",{className:"woocommerce-activity-card__header"},Object(f.createElement)("div",{className:"woocommerce-activity-card__title is-placeholder"}),a&&Object(f.createElement)("div",{className:"woocommerce-activity-card__subtitle is-placeholder"}),c&&Object(f.createElement)("div",{className:"woocommerce-activity-card__date"},Object(f.createElement)("span",{className:"is-placeholder"}))),Object(f.createElement)("div",{className:"woocommerce-activity-card__body"},Object(g.range)(o).map((function(e){return Object(f.createElement)("span",{className:"is-placeholder",key:e})}))),n&&Object(f.createElement)("div",{className:"woocommerce-activity-card__actions"},Object(f.createElement)("span",{className:"is-placeholder"})))}}]),n}(f.Component);k.propTypes={className:N.a.string,hasAction:N.a.bool,hasDate:N.a.bool,hasSubtitle:N.a.bool,lines:N.a.number},k.defaultProps={hasAction:!1,hasDate:!1,hasSubtitle:!1,lines:1};var x=k;function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,c=d()(e);if(t){var a=d()(this).constructor;n=Reflect.construct(c,arguments,a)}else n=c.apply(this,arguments);return m()(this,n)}}var C=function(e){s()(n,e);var t=R(n);function n(){return a()(this,n),t.apply(this,arguments)}return r()(n,[{key:"getCard",value:function(){var e=this.props,t=e.actions,n=e.className,c=e.children,a=e.date,o=e.icon,r=e.subtitle,i=e.title,s=e.unread,l=b()("woocommerce-activity-card",n),m=Array.isArray(t)?t:[t],u=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(a)?y.a.utc(a).fromNow():a;return Object(f.createElement)("section",{className:l},s&&Object(f.createElement)("span",{className:"woocommerce-activity-card__unread"}),o&&Object(f.createElement)("span",{className:"woocommerce-activity-card__icon","aria-hidden":!0},o),i&&Object(f.createElement)("header",{className:"woocommerce-activity-card__header"},Object(f.createElement)(j.H,{className:"woocommerce-activity-card__title"},i),r&&Object(f.createElement)("div",{className:"woocommerce-activity-card__subtitle"},r),u&&Object(f.createElement)("span",{className:"woocommerce-activity-card__date"},u)),c&&Object(f.createElement)(j.Section,{className:"woocommerce-activity-card__body"},c),t&&Object(f.createElement)("footer",{className:"woocommerce-activity-card__actions"},m.map((function(e,t){return Object(f.cloneElement)(e,{key:t})}))))}},{key:"render",value:function(){var e=this.props.onClick;return e?Object(f.createElement)(w.Button,{className:"woocommerce-activity-card__button",onClick:e},this.getCard()):this.getCard()}}]),n}(f.Component);C.propTypes={actions:N.a.oneOfType([N.a.arrayOf(N.a.element),N.a.element]),onClick:N.a.func,className:N.a.string,children:N.a.node,date:N.a.string,icon:N.a.node,subtitle:N.a.node,title:N.a.oneOfType([N.a.string,N.a.node]),unread:N.a.bool},C.defaultProps={icon:Object(f.createElement)(v.a,{size:48}),unread:!1}},583:function(e,t,n){"use strict";function c(e){return e?e.substr(1).split("&").reduce((function(e,t){var n=t.split("="),c=n[0],a=decodeURIComponent(n[1]);return a=isNaN(Number(a))?a:Number(a),e[c]=a,e}),{}):{}}function a(){var e="",t=c(window.location.search),n=t.page,a=t.path,o=t.post_type;if(n){var r="wc-admin"===n?"home_screen":n;e=a?a.replace(/\//g,"_").substring(1):r}else o&&(e=o);return e}n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o}));var o=function(e,t){return e.reduce((function(e,n){return e[t(n)?0:1].push(n),e}),[[],[]])}},594:function(e,t,n){"use strict";var c=n(38),a=n.n(c),o=n(18),r=n.n(o),i=n(26),s=n.n(i),l=n(0),m=n(6),u=n.n(m),d=n(2),f=n(34),p=n(21),b=n(11),_=n(29),v=n(217),h=n(214),y=n(33),O=n(578),N=n(219),j=n(583),w=(n(613),function(e,t){Object(_.recordEvent)("inbox_action_click",{note_name:e.name,note_title:e.title,note_content_inner_link:t})}),g=function(e){var t=e.hasNotes,n=e.isBatchUpdating,c=e.lastRead,a=e.notes,o=e.onDismiss,r=e.onNoteActionClick;if(!n){if(!t)return Object(l.createElement)(O.a,{className:"woocommerce-empty-activity-card",title:Object(d.__)("Your inbox is empty","woocommerce-admin"),icon:!1},Object(d.__)("As things begin to happen in your store your inbox will start to fill up. You'll see things like achievements, new feature announcements, extension recommendations and more!","woocommerce-admin"));var i=Object(j.a)(),s=function(e){Object(_.recordEvent)("inbox_note_view",{note_content:e.content,note_name:e.name,note_title:e.title,note_type:e.type,screen:i})},m=Object.keys(a).map((function(e){return a[e]}));return Object(l.createElement)(v.a,{role:"menu"},m.map((function(e){var t=e.id;return e.is_deleted?null:Object(l.createElement)(h.a,{key:t,timeout:500,classNames:"woocommerce-inbox-message"},Object(l.createElement)(y.InboxNoteCard,{key:t,note:e,lastRead:c,onDismiss:o,onNoteActionClick:r,onBodyLinkClick:w,onNoteVisible:s}))})))}},E={page:1,per_page:p.QUERY_DEFAULTS.pageSize,status:"unactioned",type:p.QUERY_DEFAULTS.noteTypes,orderby:"date",order:"desc",_fields:["id","name","title","content","type","status","actions","date_created","date_created_gmt","layout","image","is_deleted"]};t.a=function(){var e=Object(b.useDispatch)("core/notices").createNotice,t=Object(b.useDispatch)(p.NOTES_STORE_NAME),n=t.batchUpdateNotes,c=t.removeAllNotes,o=t.removeNote,i=t.updateNote,m=t.triggerNoteAction,v=Object(b.useSelect)((function(e){var t=e(p.NOTES_STORE_NAME),n=t.getNotes,c=t.getNotesError,a=t.isResolving,o=t.isNotesRequesting;return{notes:n(E),isError:Boolean(c("getNotes",[E])),isResolvingNotes:a("getNotes",[E]),isBatchUpdating:o("batchUpdateNotes")}})),h=v.isError,O=v.isResolvingNotes,w=v.isBatchUpdating,k=v.notes,x=Object(p.useUserPreferences)(),R=x.updateUserPreferences,C=s()(x,["updateUserPreferences"]),A=Object(l.useState)(C.activity_panel_inbox_last_read),S=r()(A,1)[0],U=Object(l.useState)(),B=r()(U,2),D=B[0],T=B[1];Object(l.useEffect)((function(){var e=Date.now();R({activity_panel_inbox_last_read:e})}),[]);var P=function(){var t=a()(u.a.mark((function t(){var a,r,s,l,m,f,p,b,v=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=v.length>0&&void 0!==v[0]&&v[0],r="all"===D.type,s=Object(j.a)(),Object(_.recordEvent)("inbox_action_dismiss",{note_name:D.note.name,note_title:D.note.title,note_name_dismiss_all:r,note_name_dismiss_confirmation:a,screen:s}),!a){t.next=30;break}if(l=D.note.id,m=!l||r,t.prev=7,f=[],!m){t.next=15;break}return t.next=12,c();case 12:f=t.sent,t.next=19;break;case 15:return t.next=17,o(l);case 17:p=t.sent,f=[p];case 19:T(void 0),e("success",f.length>1?Object(d.__)("All messages dismissed","woocommerce-admin"):Object(d.__)("Message dismissed","woocommerce-admin"),{actions:[{label:Object(d.__)("Undo","woocommerce-admin"),onClick:function(){f.length>1?n(f.map((function(e){return e.id})),{is_deleted:0}):i(l,{is_deleted:0})}}]}),t.next=28;break;case 23:t.prev=23,t.t0=t.catch(7),b=m?k.length:1,e("error",Object(d._n)("Message could not be dismissed","Messages could not be dismissed",b,"woocommerce-admin")),T(void 0);case 28:t.next=31;break;case 30:T(void 0);case 31:case"end":return t.stop()}}),t,null,[[7,23]])})));return function(){return t.apply(this,arguments)}}();if(h){var M=Object(d.__)("There was an error getting your inbox. Please try again.","woocommerce-admin"),z=Object(d.__)("Reload","woocommerce-admin");return Object(l.createElement)(f.EmptyContent,{title:M,actionLabel:z,actionURL:null,actionCallback:function(){window.location.reload()}})}var L=Object(N.b)(k);return Object(l.createElement)(l.Fragment,null,Object(l.createElement)("div",{className:"woocommerce-homepage-notes-wrapper"},(O||w)&&Object(l.createElement)(f.Section,null,Object(l.createElement)(y.InboxNotePlaceholder,{className:"banner message-is-unread"})),Object(l.createElement)(f.Section,null,!O&&!w&&g({hasNotes:L,isBatchUpdating:w,lastRead:S,notes:k,onDismiss:function(e,t){T({note:e,type:t})},onNoteActionClick:function(e,t){m(e.id,t.id)}})),D&&Object(l.createElement)(y.InboxDismissConfirmationModal,{onClose:P,onDismiss:function(){return P(!0)}})))}},609:function(e,t,n){},613:function(e,t,n){},98:function(e,t,n){"use strict";var c=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var c in t=arguments[n])Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.size,a=void 0===n?24:n,o=e.onClick,i=(e.icon,e.className),s=function(e,t){var n={};for(var c in e)0<=t.indexOf(c)||Object.prototype.hasOwnProperty.call(e,c)&&(n[c]=e[c]);return n}(e,["size","onClick","icon","className"]),l=["gridicon","gridicons-notice-outline",i,(t=a,!(0!=t%18)&&"needs-offset"),!1,!1].filter(Boolean).join(" ");return r.default.createElement("svg",c({className:l,height:a,width:a,onClick:o},s,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.default.createElement("g",null,r.default.createElement("path",{d:"M12 4c4.41 0 8 3.59 8 8s-3.59 8-8 8-8-3.59-8-8 3.59-8 8-8m0-2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm1 13h-2v2h2v-2zm-2-2h2l.5-6h-3l.5 6z"})))};var a,o=n(7),r=(a=o)&&a.__esModule?a:{default:a};e.exports=t.default}}]);