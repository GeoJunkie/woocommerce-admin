{"version":3,"sources":["webpack://wc.[modulename]/./client/analytics/components/report-filters/index.js","webpack://wc.[modulename]/./client/dashboard/customizable.js","webpack://wc.[modulename]/./client/dashboard/default-sections.js","webpack://wc.[modulename]/./client/dashboard/section-controls.js","webpack://wc.[modulename]/./client/dashboard/section.js","webpack://wc.[modulename]/./client/lib/currency-context.js"],"names":["ReportFilters","onDateSelect","bind","onFilterSelect","onAdvancedFilterAction","data","props","report","addCesSurveyForAnalytics","recordEvent","omitBy","isUndefined","triggerCesFor","filterName","filter","includes","action","key","snakeCaseData","Object","keys","reduce","result","property","snakeCase","value","match","advancedFilters","filters","path","query","showDatePicker","defaultDateRange","getDateParamsFromQuery","period","compare","before","after","getCurrentDates","primaryDate","primary","secondaryDate","secondary","dateQuery","Currency","context","LOCALE","siteLocale","getCurrencyConfig","isoDateFormat","Component","contextType","CurrencyContext","compose","withSelect","select","SETTINGS_STORE_NAME","getSetting","woocommerce_default_date_range","withDispatch","dispatch","CES_STORE_KEY","propTypes","PropTypes","object","array","string","isRequired","bool","DASHBOARD_FILTERS_FILTER","applyFilters","mergeSectionsWithDefaults","prefSections","length","defaultSections","defaultKeys","map","section","prefKeys","Set","sections","forEach","defaultSection","find","prefSection","push","CustomizableDashboard","useUserPreferences","updateUserPreferences","userPrefs","dashboard_sections","updateSections","newSections","updateSection","updatedKey","newSettings","onChangeHiddenBlocks","updatedHiddenBlocks","hiddenBlocks","onSectionTitleUpdate","updatedTitle","title","toggleVisibility","onToggle","index","findIndex","s","toggledSection","splice","shift","isVisible","onMove","change","movedSection","newIndex","nextJumpedSectionIndex","eventProps","direction","renderAddMore","hiddenSections","isOpen","__","plusCircleFilled","sprintf","icon","renderDashboardReports","visibleSectionKeys","component","partial","getFilteredCurrencyInstance","getQuery","withSelectData","LazyDashboardCharts","lazy","LazyLeaderboards","LazyStorePerformance","DashboardCharts","Leaderboards","StorePerformance","DEFAULT_SECTIONS_FILTER","SectionControls","onMoveUp","onMoveDown","onRemove","isFirst","isLast","onTitleBlur","onTitleChange","titleInput","Section","state","onToggleHiddenBlock","setState","onTitleUpdate","xor","SectionComponent","appCurrency","CurrencyFactory","CURRENCY","config","filteredConfig","createContext"],"mappings":"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","file":"chunks/customizable-dashboard.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport PropTypes from 'prop-types';\nimport { omitBy, isUndefined, snakeCase } from 'lodash';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { ReportFilters as Filters } from '@woocommerce/components';\nimport { LOCALE } from '@woocommerce/wc-admin-settings';\nimport { SETTINGS_STORE_NAME } from '@woocommerce/data';\nimport {\n\tgetCurrentDates,\n\tgetDateParamsFromQuery,\n\tisoDateFormat,\n} from '@woocommerce/date';\nimport { recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nimport { CurrencyContext } from '../../../lib/currency-context';\nimport { STORE_KEY as CES_STORE_KEY } from '../../../customer-effort-score-tracks/data/constants';\n\nclass ReportFilters extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.onDateSelect = this.onDateSelect.bind( this );\n\t\tthis.onFilterSelect = this.onFilterSelect.bind( this );\n\t\tthis.onAdvancedFilterAction = this.onAdvancedFilterAction.bind( this );\n\t}\n\n\tonDateSelect( data ) {\n\t\tconst { report, addCesSurveyForAnalytics } = this.props;\n\t\taddCesSurveyForAnalytics();\n\t\trecordEvent( 'datepicker_update', {\n\t\t\treport,\n\t\t\t...omitBy( data, isUndefined ),\n\t\t} );\n\t}\n\n\tonFilterSelect( data ) {\n\t\tconst { report, addCesSurveyForAnalytics } = this.props;\n\n\t\t// This event gets triggered in the following cases.\n\t\t// 1. Select \"Single Product\" and choose a product.\n\t\t// 2. Select \"Comparison\" or any other filter types.\n\t\t// The comparsion and other filter types require a user to click\n\t\t// a button to execute a query, so this is not a good place to\n\t\t// trigger a CES survey for those.\n\t\tconst triggerCesFor = [\n\t\t\t'single_product',\n\t\t\t'single_category',\n\t\t\t'single_coupon',\n\t\t\t'single_variation',\n\t\t];\n\t\tconst filterName = data.filter || data[ 'filter-variations' ];\n\t\tif ( triggerCesFor.includes( filterName ) ) {\n\t\t\taddCesSurveyForAnalytics();\n\t\t}\n\t\trecordEvent( 'analytics_filter', {\n\t\t\treport,\n\t\t\tfilter: data.filter || 'all',\n\t\t} );\n\t}\n\n\tonAdvancedFilterAction( action, data ) {\n\t\tconst { report, addCesSurveyForAnalytics } = this.props;\n\t\tswitch ( action ) {\n\t\t\tcase 'add':\n\t\t\t\trecordEvent( 'analytics_filters_add', {\n\t\t\t\t\treport,\n\t\t\t\t\tfilter: data.key,\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'remove':\n\t\t\t\trecordEvent( 'analytics_filters_remove', {\n\t\t\t\t\treport,\n\t\t\t\t\tfilter: data.key,\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'filter':\n\t\t\t\tconst snakeCaseData = Object.keys( data ).reduce(\n\t\t\t\t\t( result, property ) => {\n\t\t\t\t\t\tresult[ snakeCase( property ) ] = data[ property ];\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t},\n\t\t\t\t\t{}\n\t\t\t\t);\n\t\t\t\taddCesSurveyForAnalytics();\n\t\t\t\trecordEvent( 'analytics_filters_filter', {\n\t\t\t\t\treport,\n\t\t\t\t\t...snakeCaseData,\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'clear_all':\n\t\t\t\trecordEvent( 'analytics_filters_clear_all', { report } );\n\t\t\t\tbreak;\n\t\t\tcase 'match':\n\t\t\t\trecordEvent( 'analytics_filters_all_any', {\n\t\t\t\t\treport,\n\t\t\t\t\tvalue: data.match,\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tadvancedFilters,\n\t\t\tfilters,\n\t\t\tpath,\n\t\t\tquery,\n\t\t\tshowDatePicker,\n\t\t\tdefaultDateRange,\n\t\t} = this.props;\n\t\tconst { period, compare, before, after } = getDateParamsFromQuery(\n\t\t\tquery,\n\t\t\tdefaultDateRange\n\t\t);\n\t\tconst {\n\t\t\tprimary: primaryDate,\n\t\t\tsecondary: secondaryDate,\n\t\t} = getCurrentDates( query, defaultDateRange );\n\t\tconst dateQuery = {\n\t\t\tperiod,\n\t\t\tcompare,\n\t\t\tbefore,\n\t\t\tafter,\n\t\t\tprimaryDate,\n\t\t\tsecondaryDate,\n\t\t};\n\t\tconst Currency = this.context;\n\n\t\treturn (\n\t\t\t<Filters\n\t\t\t\tquery={ query }\n\t\t\t\tsiteLocale={ LOCALE.siteLocale }\n\t\t\t\tcurrency={ Currency.getCurrencyConfig() }\n\t\t\t\tpath={ path }\n\t\t\t\tfilters={ filters }\n\t\t\t\tadvancedFilters={ advancedFilters }\n\t\t\t\tshowDatePicker={ showDatePicker }\n\t\t\t\tonDateSelect={ this.onDateSelect }\n\t\t\t\tonFilterSelect={ this.onFilterSelect }\n\t\t\t\tonAdvancedFilterAction={ this.onAdvancedFilterAction }\n\t\t\t\tdateQuery={ dateQuery }\n\t\t\t\tisoDateFormat={ isoDateFormat }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nReportFilters.contextType = CurrencyContext;\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { woocommerce_default_date_range: defaultDateRange } = select(\n\t\t\tSETTINGS_STORE_NAME\n\t\t).getSetting( 'wc_admin', 'wcAdminSettings' );\n\t\treturn { defaultDateRange };\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { addCesSurveyForAnalytics } = dispatch( CES_STORE_KEY );\n\t\treturn { addCesSurveyForAnalytics };\n\t} )\n)( ReportFilters );\n\nReportFilters.propTypes = {\n\t/**\n\t * Config option passed through to `AdvancedFilters`\n\t */\n\tadvancedFilters: PropTypes.object,\n\t/**\n\t * Config option passed through to `FilterPicker` - if not used, `FilterPicker` is not displayed.\n\t */\n\tfilters: PropTypes.array,\n\t/**\n\t * The `path` parameter supplied by React-Router\n\t */\n\tpath: PropTypes.string.isRequired,\n\t/**\n\t * The query string represented in object form\n\t */\n\tquery: PropTypes.object,\n\t/**\n\t * Whether the date picker must be shown..\n\t */\n\tshowDatePicker: PropTypes.bool,\n\t/**\n\t * The report where filter are placed.\n\t */\n\treport: PropTypes.string.isRequired,\n};\n","/**\n * External dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { partial } from 'lodash';\nimport { Dropdown, Button, Icon } from '@wordpress/components';\nimport { applyFilters } from '@wordpress/hooks';\nimport { Icon as WPIcon, plusCircleFilled } from '@wordpress/icons';\nimport { withSelect } from '@wordpress/data';\nimport { H } from '@woocommerce/components';\nimport { SETTINGS_STORE_NAME, useUserPreferences } from '@woocommerce/data';\nimport { getQuery } from '@woocommerce/navigation';\nimport {\n\tgetCurrentDates,\n\tgetDateParamsFromQuery,\n\tisoDateFormat,\n} from '@woocommerce/date';\nimport { recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport defaultSections from './default-sections';\nimport Section from './section';\nimport ReportFilters from '../analytics/components/report-filters';\nimport {\n\tCurrencyContext,\n\tgetFilteredCurrencyInstance,\n} from '../lib/currency-context';\n\nconst DASHBOARD_FILTERS_FILTER = 'woocommerce_admin_dashboard_filters';\nconst filters = applyFilters( DASHBOARD_FILTERS_FILTER, [] );\n\nconst mergeSectionsWithDefaults = ( prefSections ) => {\n\tif ( ! prefSections || prefSections.length === 0 ) {\n\t\treturn defaultSections;\n\t}\n\tconst defaultKeys = defaultSections.map( ( section ) => section.key );\n\tconst prefKeys = prefSections.map( ( section ) => section.key );\n\tconst keys = new Set( [ ...prefKeys, ...defaultKeys ] );\n\tconst sections = [];\n\n\tkeys.forEach( ( key ) => {\n\t\tconst defaultSection = defaultSections.find(\n\t\t\t( section ) => section.key === key\n\t\t);\n\t\tif ( ! defaultSection ) {\n\t\t\treturn;\n\t\t}\n\t\tconst prefSection = prefSections.find(\n\t\t\t( section ) => section.key === key\n\t\t);\n\n\t\tsections.push( {\n\t\t\t...defaultSection,\n\t\t\t...prefSection,\n\t\t} );\n\t} );\n\n\treturn sections;\n};\n\nconst CustomizableDashboard = ( { defaultDateRange, path, query } ) => {\n\tconst { updateUserPreferences, ...userPrefs } = useUserPreferences();\n\n\tconst sections = mergeSectionsWithDefaults( userPrefs.dashboard_sections );\n\n\tconst updateSections = ( newSections ) => {\n\t\tupdateUserPreferences( { dashboard_sections: newSections } );\n\t};\n\n\tconst updateSection = ( updatedKey, newSettings ) => {\n\t\tconst newSections = sections.map( ( section ) => {\n\t\t\tif ( section.key === updatedKey ) {\n\t\t\t\treturn {\n\t\t\t\t\t...section,\n\t\t\t\t\t...newSettings,\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn section;\n\t\t} );\n\t\tupdateSections( newSections );\n\t};\n\n\tconst onChangeHiddenBlocks = ( updatedKey ) => {\n\t\treturn ( updatedHiddenBlocks ) => {\n\t\t\tupdateSection( updatedKey, {\n\t\t\t\thiddenBlocks: updatedHiddenBlocks,\n\t\t\t} );\n\t\t};\n\t};\n\n\tconst onSectionTitleUpdate = ( updatedKey ) => {\n\t\treturn ( updatedTitle ) => {\n\t\t\trecordEvent( 'dash_section_rename', { key: updatedKey } );\n\t\t\tupdateSection( updatedKey, { title: updatedTitle } );\n\t\t};\n\t};\n\n\tconst toggleVisibility = ( key, onToggle ) => {\n\t\treturn () => {\n\t\t\tif ( onToggle ) {\n\t\t\t\t// Close the dropdown before setting state so an action is not performed on an unmounted component.\n\t\t\t\tonToggle();\n\t\t\t}\n\t\t\t// When toggling visibility, place section at the end of the array.\n\t\t\tconst index = sections.findIndex( ( s ) => key === s.key );\n\t\t\tconst toggledSection = sections.splice( index, 1 ).shift();\n\t\t\ttoggledSection.isVisible = ! toggledSection.isVisible;\n\t\t\tsections.push( toggledSection );\n\n\t\t\tif ( toggledSection.isVisible ) {\n\t\t\t\trecordEvent( 'dash_section_add', { key: toggledSection.key } );\n\t\t\t} else {\n\t\t\t\trecordEvent( 'dash_section_remove', {\n\t\t\t\t\tkey: toggledSection.key,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tupdateSections( sections );\n\t\t};\n\t};\n\n\tconst onMove = ( index, change ) => {\n\t\tconst movedSection = sections.splice( index, 1 ).shift();\n\t\tconst newIndex = index + change;\n\n\t\t// Figure out the index of the skipped section.\n\t\tconst nextJumpedSectionIndex = change < 0 ? newIndex : newIndex - 1;\n\n\t\tif (\n\t\t\tsections[ nextJumpedSectionIndex ].isVisible || // Is the skipped section visible?\n\t\t\tindex === 0 || // Will this be the first element?\n\t\t\tindex === sections.length - 1 // Will this be the last element?\n\t\t) {\n\t\t\t// Yes, lets insert.\n\t\t\tsections.splice( newIndex, 0, movedSection );\n\t\t\tupdateSections( sections );\n\n\t\t\tconst eventProps = {\n\t\t\t\tkey: movedSection.key,\n\t\t\t\tdirection: change > 0 ? 'down' : 'up',\n\t\t\t};\n\t\t\trecordEvent( 'dash_section_order_change', eventProps );\n\t\t} else {\n\t\t\t// No, lets try the next one.\n\t\t\tonMove( index, change + change );\n\t\t}\n\t};\n\n\tconst renderAddMore = () => {\n\t\tconst hiddenSections = sections.filter(\n\t\t\t( section ) => section.isVisible === false\n\t\t);\n\n\t\tif ( hiddenSections.length === 0 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Dropdown\n\t\t\t\tposition=\"top center\"\n\t\t\t\tclassName=\"woocommerce-dashboard-section__add-more\"\n\t\t\t\trenderToggle={ ( { onToggle, isOpen } ) => (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\ttitle={ __( 'Add more sections', 'woocommerce-admin' ) }\n\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t>\n\t\t\t\t\t\t<WPIcon icon={ plusCircleFilled } />\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t\trenderContent={ ( { onToggle } ) => (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<H>\n\t\t\t\t\t\t\t{ __( 'Dashboard Sections', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</H>\n\t\t\t\t\t\t<div className=\"woocommerce-dashboard-section__add-more-choices\">\n\t\t\t\t\t\t\t{ hiddenSections.map( ( section ) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tkey={ section.key }\n\t\t\t\t\t\t\t\t\t\tonClick={ toggleVisibility(\n\t\t\t\t\t\t\t\t\t\t\tsection.key,\n\t\t\t\t\t\t\t\t\t\t\tonToggle\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\tclassName=\"woocommerce-dashboard-section__add-more-btn\"\n\t\t\t\t\t\t\t\t\t\ttitle={ sprintf(\n\t\t\t\t\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\t\t\t\t'Add %s section',\n\t\t\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\tsection.title\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\ticon={ section.icon }\n\t\t\t\t\t\t\t\t\t\t\tsize={ 30 }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<span className=\"woocommerce-dashboard-section__add-more-btn-title\">\n\t\t\t\t\t\t\t\t\t\t\t{ section.title }\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Fragment>\n\t\t\t\t) }\n\t\t\t/>\n\t\t);\n\t};\n\n\tconst renderDashboardReports = () => {\n\t\tconst { period, compare, before, after } = getDateParamsFromQuery(\n\t\t\tquery,\n\t\t\tdefaultDateRange\n\t\t);\n\t\tconst {\n\t\t\tprimary: primaryDate,\n\t\t\tsecondary: secondaryDate,\n\t\t} = getCurrentDates( query, defaultDateRange );\n\t\tconst dateQuery = {\n\t\t\tperiod,\n\t\t\tcompare,\n\t\t\tbefore,\n\t\t\tafter,\n\t\t\tprimaryDate,\n\t\t\tsecondaryDate,\n\t\t};\n\t\tconst visibleSectionKeys = sections\n\t\t\t.filter( ( section ) => section.isVisible )\n\t\t\t.map( ( section ) => section.key );\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<ReportFilters\n\t\t\t\t\treport=\"dashboard\"\n\t\t\t\t\tquery={ query }\n\t\t\t\t\tpath={ path }\n\t\t\t\t\tdateQuery={ dateQuery }\n\t\t\t\t\tisoDateFormat={ isoDateFormat }\n\t\t\t\t\tfilters={ filters }\n\t\t\t\t/>\n\t\t\t\t{ sections.map( ( section, index ) => {\n\t\t\t\t\tif ( section.isVisible ) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Section\n\t\t\t\t\t\t\t\tcomponent={ section.component }\n\t\t\t\t\t\t\t\thiddenBlocks={ section.hiddenBlocks }\n\t\t\t\t\t\t\t\tkey={ section.key }\n\t\t\t\t\t\t\t\tonChangeHiddenBlocks={ onChangeHiddenBlocks(\n\t\t\t\t\t\t\t\t\tsection.key\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tonTitleUpdate={ onSectionTitleUpdate(\n\t\t\t\t\t\t\t\t\tsection.key\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tpath={ path }\n\t\t\t\t\t\t\t\tquery={ query }\n\t\t\t\t\t\t\t\ttitle={ section.title }\n\t\t\t\t\t\t\t\tonMove={ partial( onMove, index ) }\n\t\t\t\t\t\t\t\tonRemove={ toggleVisibility( section.key ) }\n\t\t\t\t\t\t\t\tisFirst={\n\t\t\t\t\t\t\t\t\tsection.key === visibleSectionKeys[ 0 ]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tisLast={\n\t\t\t\t\t\t\t\t\tsection.key ===\n\t\t\t\t\t\t\t\t\tvisibleSectionKeys[\n\t\t\t\t\t\t\t\t\t\tvisibleSectionKeys.length - 1\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfilters={ filters }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t} ) }\n\t\t\t\t{ renderAddMore() }\n\t\t\t</Fragment>\n\t\t);\n\t};\n\n\treturn (\n\t\t<CurrencyContext.Provider\n\t\t\tvalue={ getFilteredCurrencyInstance( getQuery() ) }\n\t\t>\n\t\t\t{ renderDashboardReports() }\n\t\t</CurrencyContext.Provider>\n\t);\n};\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { woocommerce_default_date_range: defaultDateRange } = select(\n\t\t\tSETTINGS_STORE_NAME\n\t\t).getSetting( 'wc_admin', 'wcAdminSettings' );\n\n\t\tconst withSelectData = {\n\t\t\tdefaultDateRange,\n\t\t};\n\n\t\treturn withSelectData;\n\t} )\n)( CustomizableDashboard );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { applyFilters } from '@wordpress/hooks';\nimport { lazy, Suspense } from '@wordpress/element';\nimport { Spinner } from '@woocommerce/components';\n\n/**\n * Internal dependencies\n */\nconst LazyDashboardCharts = lazy( () =>\n\timport( /* webpackChunkName: \"dashboard-charts\" */ './dashboard-charts' )\n);\nconst LazyLeaderboards = lazy( () =>\n\timport( /* webpackChunkName: \"leaderboards\" */ './leaderboards' )\n);\nconst LazyStorePerformance = lazy( () =>\n\timport( /* webpackChunkName: \"store-performance\" */ './store-performance' )\n);\n\nconst DashboardCharts = ( props ) => (\n\t<Suspense fallback={ <Spinner /> }>\n\t\t<LazyDashboardCharts { ...props } />\n\t</Suspense>\n);\n\nconst Leaderboards = ( props ) => (\n\t<Suspense fallback={ <Spinner /> }>\n\t\t<LazyLeaderboards { ...props } />\n\t</Suspense>\n);\n\nconst StorePerformance = ( props ) => (\n\t<Suspense fallback={ <Spinner /> }>\n\t\t<LazyStorePerformance { ...props } />\n\t</Suspense>\n);\n\nconst DEFAULT_SECTIONS_FILTER = 'woocommerce_dashboard_default_sections';\n\nexport default applyFilters( DEFAULT_SECTIONS_FILTER, [\n\t{\n\t\tkey: 'store-performance',\n\t\tcomponent: StorePerformance,\n\t\ttitle: __( 'Performance', 'woocommerce-admin' ),\n\t\tisVisible: true,\n\t\ticon: 'arrow-right-alt',\n\t\thiddenBlocks: [\n\t\t\t'coupons/amount',\n\t\t\t'coupons/orders_count',\n\t\t\t'downloads/download_count',\n\t\t\t'taxes/order_tax',\n\t\t\t'taxes/total_tax',\n\t\t\t'taxes/shipping_tax',\n\t\t\t'revenue/shipping',\n\t\t\t'orders/avg_order_value',\n\t\t\t'revenue/refunds',\n\t\t\t'revenue/gross_sales',\n\t\t],\n\t},\n\t{\n\t\tkey: 'charts',\n\t\tcomponent: DashboardCharts,\n\t\ttitle: __( 'Charts', 'woocommerce-admin' ),\n\t\tisVisible: true,\n\t\ticon: 'chart-bar',\n\t\thiddenBlocks: [\n\t\t\t'orders_avg_order_value',\n\t\t\t'avg_items_per_order',\n\t\t\t'products_items_sold',\n\t\t\t'revenue_total_sales',\n\t\t\t'revenue_refunds',\n\t\t\t'coupons_amount',\n\t\t\t'coupons_orders_count',\n\t\t\t'revenue_shipping',\n\t\t\t'taxes_total_tax',\n\t\t\t'taxes_order_tax',\n\t\t\t'taxes_shipping_tax',\n\t\t\t'downloads_download_count',\n\t\t],\n\t},\n\t{\n\t\tkey: 'leaderboards',\n\t\tcomponent: Leaderboards,\n\t\ttitle: __( 'Leaderboards', 'woocommerce-admin' ),\n\t\tisVisible: true,\n\t\ticon: 'editor-ol',\n\t\thiddenBlocks: [ 'coupons', 'customers' ],\n\t},\n] );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Icon, TextControl } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\nimport { MenuItem } from '@woocommerce/components';\n\nclass SectionControls extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.onMoveUp = this.onMoveUp.bind( this );\n\t\tthis.onMoveDown = this.onMoveDown.bind( this );\n\t}\n\n\tonMoveUp() {\n\t\tconst { onMove, onToggle } = this.props;\n\t\tonMove( -1 );\n\t\t// Close the dropdown\n\t\tonToggle();\n\t}\n\n\tonMoveDown() {\n\t\tconst { onMove, onToggle } = this.props;\n\t\tonMove( 1 );\n\t\t// Close the dropdown\n\t\tonToggle();\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tonRemove,\n\t\t\tisFirst,\n\t\t\tisLast,\n\t\t\tonTitleBlur,\n\t\t\tonTitleChange,\n\t\t\ttitleInput,\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"woocommerce-ellipsis-menu__item\">\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={ __( 'Section Title', 'woocommerce-admin' ) }\n\t\t\t\t\t\tonBlur={ onTitleBlur }\n\t\t\t\t\t\tonChange={ onTitleChange }\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tvalue={ titleInput }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"woocommerce-dashboard-section-controls\">\n\t\t\t\t\t{ ! isFirst && (\n\t\t\t\t\t\t<MenuItem isClickable onInvoke={ this.onMoveUp }>\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ticon={ 'arrow-up-alt2' }\n\t\t\t\t\t\t\t\tlabel={ __( 'Move up' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{ __( 'Move up', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t) }\n\t\t\t\t\t{ ! isLast && (\n\t\t\t\t\t\t<MenuItem isClickable onInvoke={ this.onMoveDown }>\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ticon={ 'arrow-down-alt2' }\n\t\t\t\t\t\t\t\tlabel={ __( 'Move Down' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{ __( 'Move Down', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t) }\n\t\t\t\t\t<MenuItem isClickable onInvoke={ onRemove }>\n\t\t\t\t\t\t<Icon icon={ 'trash' } label={ __( 'Remove block' ) } />\n\t\t\t\t\t\t{ __( 'Remove section', 'woocommerce-admin' ) }\n\t\t\t\t\t</MenuItem>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nexport default SectionControls;\n","/**\n * External dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { xor } from 'lodash';\n\n/**\n * Internal dependencies\n */\nimport SectionControls from './section-controls';\n\nexport default class Section extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tconst { title } = props;\n\n\t\tthis.state = {\n\t\t\ttitleInput: title,\n\t\t};\n\n\t\tthis.onToggleHiddenBlock = this.onToggleHiddenBlock.bind( this );\n\t\tthis.onTitleChange = this.onTitleChange.bind( this );\n\t\tthis.onTitleBlur = this.onTitleBlur.bind( this );\n\t}\n\n\tonTitleChange( updatedTitle ) {\n\t\tthis.setState( { titleInput: updatedTitle } );\n\t}\n\n\tonTitleBlur() {\n\t\tconst { onTitleUpdate, title } = this.props;\n\t\tconst { titleInput } = this.state;\n\n\t\tif ( titleInput === '' ) {\n\t\t\tthis.setState( { titleInput: title } );\n\t\t} else if ( onTitleUpdate ) {\n\t\t\tonTitleUpdate( titleInput );\n\t\t}\n\t}\n\n\tonToggleHiddenBlock( key ) {\n\t\treturn () => {\n\t\t\tconst hiddenBlocks = xor( this.props.hiddenBlocks, [ key ] );\n\t\t\tthis.props.onChangeHiddenBlocks( hiddenBlocks );\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { component: SectionComponent, ...props } = this.props;\n\t\tconst { titleInput } = this.state;\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-dashboard-section\">\n\t\t\t\t<SectionComponent\n\t\t\t\t\tonTitleChange={ this.onTitleChange }\n\t\t\t\t\tonTitleBlur={ this.onTitleBlur }\n\t\t\t\t\tonToggleHiddenBlock={ this.onToggleHiddenBlock }\n\t\t\t\t\ttitleInput={ titleInput }\n\t\t\t\t\tcontrols={ SectionControls }\n\t\t\t\t\t{ ...props }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","/**\n * External dependencies\n */\nimport { createContext } from '@wordpress/element';\nimport { applyFilters } from '@wordpress/hooks';\nimport CurrencyFactory from '@woocommerce/currency';\nimport { CURRENCY } from '@woocommerce/wc-admin-settings';\n\nconst appCurrency = CurrencyFactory( CURRENCY );\n\nexport const getFilteredCurrencyInstance = ( query ) => {\n\tconst config = appCurrency.getCurrencyConfig();\n\tconst filteredConfig = applyFilters(\n\t\t'woocommerce_admin_report_currency',\n\t\tconfig,\n\t\tquery\n\t);\n\treturn CurrencyFactory( filteredConfig );\n};\n\nexport const CurrencyContext = createContext(\n\tappCurrency // default value\n);\n"],"sourceRoot":""}