(window.__wcAdmin_webpackJsonp=window.__wcAdmin_webpackJsonp||[]).push([[47,54],{571:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(11);function c(e){var t=Object(o.dispatch)("core/notices").createNotice;e.error_data&&e.errors&&Object.keys(e.errors).length?Object.keys(e.errors).forEach((function(n){t("error",e.errors[n].join(" "))})):e.message&&t(e.code?"error":"success",e.message)}},574:function(e,t,n){"use strict";n.r(t);var o=n(18),c=n.n(o),r=n(0),i=n(2),a=n(22),s=n(30),u=n.n(s),m=n(34),l=n(575);t.default=function(){var e="1"===Object(a.getQuery)()["wcpay-connection-success"],t=Object(r.useState)(e),n=c()(t,2),o=n[0],s=n[1];if(!o)return null;var d=function(){s(!1),Object(a.updateQueryString)({"wcpay-connection-success":void 0})},p=Object(i.__)("Help us build a better WooCommerce Payments experience","woocommerce-admin"),f=u()({mixedString:Object(i.__)("By agreeing to share non-sensitive {{link}}usage data{{/link}}, youâ€™ll help us improve features and optimize the WooCommerce Payments experience. You can opt out at any time.","woocommerce-admin"),components:{link:Object(r.createElement)(m.Link,{href:"https://woocommerce.com/usage-tracking",target:"_blank",type:"external"})}});return Object(r.createElement)(l.a,{isDismissible:!1,title:p,message:f,acceptActionText:Object(i.__)("I agree","woocommerce-admin"),dismissActionText:Object(i.__)("No thanks","woocommerce-admin"),onContinue:d,onClose:d})}},575:function(e,t,n){"use strict";var o=n(38),c=n.n(o),r=n(13),i=n.n(r),a=n(14),s=n.n(a),u=n(15),m=n.n(u),l=n(16),d=n.n(l),p=n(9),f=n.n(p),_=n(0),w=n(6),O=n.n(w),b=n(2),g=n(25),h=n(11),y=n(30),v=n.n(y),j=n(4),E=n(34),k=n(21),S=n(162);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=f()(e);if(t){var c=f()(this).constructor;n=Reflect.construct(o,arguments,c)}else n=o.apply(this,arguments);return d()(this,n)}}var T=function(e){m()(o,e);var t,n=N(o);function o(e){var t;return i()(this,o),(t=n.call(this,e)).state={isLoadingScripts:!1,isRequestStarted:!1},t}return s()(o,[{key:"componentDidUpdate",value:(t=c()(O.a.mark((function e(t,n){var o,c,r,i,a,s,u,m,l,d;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.props,c=o.hasErrors,r=o.isRequesting,i=o.onClose,a=o.onContinue,s=o.createNotice,u=this.state,m=u.isLoadingScripts,u.isRequestStarted){e.next=4;break}return e.abrupt("return");case 4:l=!r&&!m&&(t.isRequesting||n.isLoadingScripts)&&!c,d=!r&&t.isRequesting&&c,l&&(i(),a()),d&&(s("error",Object(b.__)("There was a problem updating your preferences","woocommerce-admin")),i());case 8:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"updateTracking",value:function(e){var t=this,n=e.allowTracking,o=this.props.updateOptions;n&&"function"==typeof window.wcTracks.enable?(this.setState({isLoadingScripts:!0}),window.wcTracks.enable((function(){t._isMounted&&(Object(S.initializeExPlat)(),t.setState({isLoadingScripts:!1}))}))):n||(window.wcTracks.isEnabled=!1);var c=n?"yes":"no";this.setState({isRequestStarted:!0}),o({woocommerce_allow_tracking:c})}},{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;if(this.props.allowTracking){var t=this.props,n=t.onClose,o=t.onContinue;return n(),o(),null}var c=this.props,r=c.isRequesting,i=c.title,a=void 0===i?Object(b.__)("Build a better WooCommerce","woocommerce-admin"):i,s=c.message,u=void 0===s?v()({mixedString:Object(b.__)("Get improved features and faster fixes by sharing non-sensitive data via {{link}}usage tracking{{/link}} that shows us how WooCommerce is used. No personal data is tracked or stored.","woocommerce-admin"),components:{link:Object(_.createElement)(E.Link,{href:"https://woocommerce.com/usage-tracking",target:"_blank",type:"external"})}}):s,m=c.dismissActionText,l=void 0===m?Object(b.__)("No thanks","woocommerce-admin"):m,d=c.acceptActionText,p=void 0===d?Object(b.__)("Yes, count me in!","woocommerce-admin"):d,f=this.state.isRequestStarted&&r;return Object(_.createElement)(j.Modal,{title:a,isDismissible:this.props.isDismissible,onRequestClose:function(){return e.props.onClose()},className:"woocommerce-usage-modal"},Object(_.createElement)("div",{className:"woocommerce-usage-modal__wrapper"},Object(_.createElement)("div",{className:"woocommerce-usage-modal__message"},u),Object(_.createElement)("div",{className:"woocommerce-usage-modal__actions"},Object(_.createElement)(j.Button,{isSecondary:!0,isBusy:f,onClick:function(){return e.updateTracking({allowTracking:!1})}},l),Object(_.createElement)(j.Button,{isPrimary:!0,isBusy:f,onClick:function(){return e.updateTracking({allowTracking:!0})}},p))))}}]),o}(_.Component);t.a=Object(g.compose)(Object(h.withSelect)((function(e){var t=e(k.OPTIONS_STORE_NAME),n=t.getOption,o=t.getOptionsUpdatingError,c=t.isOptionsUpdating;return{allowTracking:"yes"===n("woocommerce_allow_tracking"),isRequesting:Boolean(c()),hasErrors:Boolean(o())}})),Object(h.withDispatch)((function(e){return{createNotice:e("core/notices").createNotice,updateOptions:e(k.OPTIONS_STORE_NAME).updateOptions}})))(T)},577:function(e,t,n){"use strict";n.d(t,"d",(function(){return y})),n.d(t,"c",(function(){return N})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return o.default}));var o=n(574),c=n(13),r=n.n(c),i=n(14),a=n.n(i),s=n(15),u=n.n(s),m=n(16),l=n.n(m),d=n(9),p=n.n(d),f=n(2),_=n(0),w=n(11),O=n(22);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=p()(e);if(t){var c=p()(this).constructor;n=Reflect.construct(o,arguments,c)}else n=o.apply(this,arguments);return l()(this,n)}}var g=function(e){u()(n,e);var t=b(n);function n(){return r()(this,n),t.apply(this,arguments)}return a()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.createNotice,n=e.markConfigured;Object(O.getQuery)()["wcpay-connection-success"]&&(t("success",Object(f.__)("WooCommerce Payments connected successfully.","woocommerce-admin")),n("wcpay",{"wcpay-connection-success":"1"}))}},{key:"render",value:function(){return null}}]),n}(_.Component),h=Object(w.withDispatch)((function(e){return{createNotice:e("core/notices").createNotice}}))(g);function y(e){var t=["US","PR"];return window.wcAdminFeatures&&window.wcAdminFeatures["wcpay/support-international-countries"]&&t.push("AU","CA","DE","ES","FR","GB","IE","IT","NZ"),t.includes(e)}var v=n(31),j=n.n(v),E=n(21),k=n(29),S=n(571);function N(e,t,n){var o=Object(f.__)("There was an error connecting to WooCommerce Payments. Please try again or connect later in store settings.","woocommerce-admin");n(["woocommerce-payments"]).then((function(){Object(k.recordEvent)("woocommerce_payments_install",{context:"tasklist"}),j()({path:E.WC_ADMIN_NAMESPACE+"/plugins/connect-wcpay",method:"POST"}).then((function(e){window.location=e.connectUrl})).catch((function(){t("error",o),e()}))})).catch((function(t){Object(S.a)(t),e()}))}},650:function(e,t,n){"use strict";var o=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.size,c=void 0===n?24:n,r=e.onClick,a=(e.icon,e.className),s=function(e,t){var n={};for(var o in e)0<=t.indexOf(o)||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["size","onClick","icon","className"]),u=["gridicon","gridicons-external",a,(t=c,!(0!=t%18)&&"needs-offset"),!1,!1].filter(Boolean).join(" ");return i.default.createElement("svg",o({className:u,height:c,width:c,onClick:r},s,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),i.default.createElement("g",null,i.default.createElement("path",{d:"M19 13v6c0 1.105-.895 2-2 2H5c-1.105 0-2-.895-2-2V7c0-1.105.895-2 2-2h6v2H5v12h12v-6h2zM13 3v2h4.586l-7.793 7.793 1.414 1.414L19 6.414V11h2V3h-8z"})))};var c,r=n(7),i=(c=r)&&c.__esModule?c:{default:c};e.exports=t.default},651:function(e,t,n){},668:function(e,t,n){"use strict";n.r(t),n.d(t,"getPaymentRecommendationData",(function(){return j}));var o=n(5),c=n.n(o),r=n(18),i=n.n(r),a=n(0),s=n(2),u=n(11),m=n(47),l=n(4),d=n(34),p=n(33),f=n(21),_=n(29),w=n(650),O=n.n(w),b=(n(651),n(92)),g=n(28),h=n(571),y=n(577),v="woocommerce_setting_payments_recommendations_hidden";function j(e){var t,n=e(f.OPTIONS_STORE_NAME),o=n.getOption,c=n.isResolving,r=e(f.SETTINGS_STORE_NAME).getSettings,i=e(f.PLUGINS_STORE_NAME).getRecommendedPlugins,a=r("general").general,s=void 0===a?{}:a,u=o("woocommerce_show_marketplace_suggestions"),m=o(v),l=s.woocommerce_default_country?Object(b.b)(s.woocommerce_default_country):null,d=!!l&&Object(y.d)(l),p=!(c("getOption",[v])||c("getOption",["woocommerce_show_marketplace_suggestions"]))&&"yes"!==m&&"yes"===u&&d;return p&&(t=i("payments")),{displayable:p,recommendedPlugins:t}}t.default=function(){var e=Object(a.useState)(null),t=i()(e,2),n=t[0],o=t[1],r=Object(u.useDispatch)(f.OPTIONS_STORE_NAME).updateOptions,w=Object(u.useDispatch)(f.PLUGINS_STORE_NAME).installAndActivatePlugins,b=Object(u.useSelect)(j),y=b.displayable,E=b.recommendedPlugins,k=Object(a.useRef)(!1),S=y&&E&&E.length>0;if(Object(a.useEffect)((function(){S&&!k.current&&(k.current=!0,Object(_.recordEvent)("settings_payments_recommendations_pageview",{}))}),[S]),!S)return null;var N=function(){Object(_.recordEvent)("settings_payments_recommendations_dismiss",{}),r(c()({},v,"yes"))},T=(E||[]).map((function(e){return{key:e.slug,title:Object(a.createElement)(a.Fragment,null,e.title,e.recommended&&Object(a.createElement)(d.Pill,null,Object(s.__)("Recommended","woocommerce-admin"))),content:Object(m.decodeEntities)(e.copy),after:Object(a.createElement)(l.Button,{isSecondary:!0,onClick:function(){return function(e){n||(o(e.product),Object(_.recordEvent)("settings_payments_recommendations_setup",{extension_selected:e.product}),w([e.product]).then((function(){window.location.href=Object(g.g)(e["setup-link"].replace("/wp-admin/",""))})).catch((function(e){Object(h.a)(e),o(null)})))}(e)},isBusy:n===e.product,disabled:!!n},e["button-text"]),before:Object(a.createElement)("img",{src:e.icon,alt:""})}}));return Object(a.createElement)(l.Card,{size:"large",className:"woocommerce-recommended-payments-card"},Object(a.createElement)(l.CardHeader,{size:"medium"},Object(a.createElement)("div",{className:"woocommerce-recommended-payments-card__header"},Object(a.createElement)(p.Text,{variant:"title.small"},Object(s.__)("Recommended ways to get paid","woocommerce-admin")),Object(a.createElement)(p.Text,{className:"woocommerce-recommended-payments__header-heading",variant:"caption"},Object(s.__)('We recommend adding one of the following payment extensions to your store. The extension will be installed and activated for you when you click "Get started".',"woocommerce-admin"))),Object(a.createElement)("div",{className:"woocommerce-card__menu woocommerce-card__header-item"},Object(a.createElement)(d.EllipsisMenu,{label:Object(s.__)("Task List Options","woocommerce-admin"),renderContent:function(){return Object(a.createElement)("div",{className:"woocommerce-review-activity-card__section-controls"},Object(a.createElement)(l.Button,{onClick:N},Object(s.__)("Hide this","woocommerce-admin")))}}))),Object(a.createElement)(l.CardBody,null,Object(a.createElement)(d.List,{items:T})),Object(a.createElement)(l.CardFooter,null,Object(a.createElement)(l.Button,{href:"https://woocommerce.com/product-category/woocommerce-extensions/payment-gateways/?utm_source=payments_recommendations",target:"_blank",isTertiary:!0},Object(s.__)("See more options","woocommerce-admin"),Object(a.createElement)(O.a,{size:18}))))}}}]);