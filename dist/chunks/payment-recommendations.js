(window.__wcAdmin_webpackJsonp=window.__wcAdmin_webpackJsonp||[]).push([[44,51],{551:function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));var n=o(7);function c(e){const{createNotice:t}=Object(n.dispatch)("core/notices");e.error_data&&e.errors&&Object.keys(e.errors).length?Object.keys(e.errors).forEach(o=>{t("error",e.errors[o].join(" "))}):e.message&&t(e.code?"error":"success",e.message)}},553:function(e,t,o){"use strict";o.r(t);var n=o(0),c=o(2),s=o(12),r=o(19),a=o.n(r),i=o(23),m=o(554);t.default=()=>{const e="1"===Object(s.getQuery)()["wcpay-connection-success"],[t,o]=Object(n.useState)(e);if(!t)return null;const r=()=>{o(!1),Object(s.updateQueryString)({"wcpay-connection-success":void 0})},l=Object(c.__)("Help us build a better WooCommerce Payments experience","woocommerce-admin"),d=a()({mixedString:Object(c.__)("By agreeing to share non-sensitive {{link}}usage data{{/link}}, youâ€™ll help us improve features and optimize the WooCommerce Payments experience. You can opt out at any time.","woocommerce-admin"),components:{link:Object(n.createElement)(i.Link,{href:"https://woocommerce.com/usage-tracking",target:"_blank",type:"external"})}});return Object(n.createElement)(m.a,{isDismissible:!1,title:l,message:d,acceptActionText:Object(c.__)("I agree","woocommerce-admin"),dismissActionText:Object(c.__)("No thanks","woocommerce-admin"),onContinue:r,onClose:r})}},554:function(e,t,o){"use strict";var n=o(0),c=o(2),s=o(15),r=o(7),a=o(19),i=o.n(a),m=o(4),l=o(23),d=o(11),u=o(140);class p extends n.Component{constructor(e){super(e),this.state={isLoadingScripts:!1,isRequestStarted:!1}}async componentDidUpdate(e,t){const{hasErrors:o,isRequesting:n,onClose:s,onContinue:r,createNotice:a}=this.props,{isLoadingScripts:i,isRequestStarted:m}=this.state;if(!m)return;const l=!n&&!i&&(e.isRequesting||t.isLoadingScripts)&&!o,d=!n&&e.isRequesting&&o;l&&(s(),r()),d&&(a("error",Object(c.__)("There was a problem updating your preferences","woocommerce-admin")),s())}updateTracking({allowTracking:e}){const{updateOptions:t}=this.props;e&&"function"==typeof window.wcTracks.enable?(this.setState({isLoadingScripts:!0}),window.wcTracks.enable(()=>{this._isMounted&&(Object(u.initializeExPlat)(),this.setState({isLoadingScripts:!1}))})):e||(window.wcTracks.isEnabled=!1);const o=e?"yes":"no";this.setState({isRequestStarted:!0}),t({woocommerce_allow_tracking:o})}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){if(this.props.allowTracking){const{onClose:e,onContinue:t}=this.props;return e(),t(),null}const{isRequesting:e,title:t=Object(c.__)("Build a better WooCommerce","woocommerce-admin"),message:o=i()({mixedString:Object(c.__)("Get improved features and faster fixes by sharing non-sensitive data via {{link}}usage tracking{{/link}} that shows us how WooCommerce is used. No personal data is tracked or stored.","woocommerce-admin"),components:{link:Object(n.createElement)(l.Link,{href:"https://woocommerce.com/usage-tracking",target:"_blank",type:"external"})}}),dismissActionText:s=Object(c.__)("No thanks","woocommerce-admin"),acceptActionText:r=Object(c.__)("Yes, count me in!","woocommerce-admin")}=this.props,{isRequestStarted:a}=this.state,d=a&&e;return Object(n.createElement)(m.Modal,{title:t,isDismissible:this.props.isDismissible,onRequestClose:()=>this.props.onClose(),className:"woocommerce-usage-modal"},Object(n.createElement)("div",{className:"woocommerce-usage-modal__wrapper"},Object(n.createElement)("div",{className:"woocommerce-usage-modal__message"},o),Object(n.createElement)("div",{className:"woocommerce-usage-modal__actions"},Object(n.createElement)(m.Button,{isSecondary:!0,isBusy:d,onClick:()=>this.updateTracking({allowTracking:!1})},s),Object(n.createElement)(m.Button,{isPrimary:!0,isBusy:d,onClick:()=>this.updateTracking({allowTracking:!0})},r))))}}t.a=Object(s.compose)(Object(r.withSelect)(e=>{const{getOption:t,getOptionsUpdatingError:o,isOptionsUpdating:n}=e(d.OPTIONS_STORE_NAME);return{allowTracking:"yes"===t("woocommerce_allow_tracking"),isRequesting:Boolean(n()),hasErrors:Boolean(o())}}),Object(r.withDispatch)(e=>{const{createNotice:t}=e("core/notices"),{updateOptions:o}=e(d.OPTIONS_STORE_NAME);return{createNotice:t,updateOptions:o}}))(p)},560:function(e,t,o){"use strict";o.d(t,"d",(function(){return l})),o.d(t,"c",(function(){return O})),o.d(t,"a",(function(){return m})),o.d(t,"b",(function(){return n.default}));var n=o(553),c=o(2),s=o(0),r=o(7),a=o(12);class i extends s.Component{componentDidMount(){const{createNotice:e,markConfigured:t}=this.props;Object(a.getQuery)()["wcpay-connection-success"]&&(e("success",Object(c.__)("WooCommerce Payments connected successfully.","woocommerce-admin")),t("wcpay",{"wcpay-connection-success":"1"}))}render(){return null}}var m=Object(r.withDispatch)(e=>{const{createNotice:t}=e("core/notices");return{createNotice:t}})(i);function l(e){const t=["US","PR"];return window.wcAdminFeatures&&window.wcAdminFeatures["wcpay/support-international-countries"]&&t.push("AU","CA","DE","ES","FR","GB","IE","IT","NZ"),t.includes(e)}var d=o(20),u=o.n(d),p=o(11),_=o(18),w=o(551);function O(e,t,o){const n=Object(c.__)("There was an error connecting to WooCommerce Payments. Please try again or connect later in store settings.","woocommerce-admin");o(["woocommerce-payments"]).then(()=>{Object(_.recordEvent)("woocommerce_payments_install",{context:"tasklist"}),u()({path:p.WC_ADMIN_NAMESPACE+"/plugins/connect-wcpay",method:"POST"}).then(e=>{window.location=e.connectUrl}).catch(()=>{t("error",n),e()})}).catch(t=>{Object(w.a)(t),e()})}},630:function(e,t,o){"use strict";var n=Object.assign||function(e){for(var t,o=1;o<arguments.length;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,o=e.size,c=void 0===o?24:o,s=e.onClick,a=(e.icon,e.className),i=function(e,t){var o={};for(var n in e)0<=t.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}(e,["size","onClick","icon","className"]),m=["gridicon","gridicons-external",a,(t=c,!(0!=t%18)&&"needs-offset"),!1,!1].filter(Boolean).join(" ");return r.default.createElement("svg",n({className:m,height:c,width:c,onClick:s},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.default.createElement("g",null,r.default.createElement("path",{d:"M19 13v6c0 1.105-.895 2-2 2H5c-1.105 0-2-.895-2-2V7c0-1.105.895-2 2-2h6v2H5v12h12v-6h2zM13 3v2h4.586l-7.793 7.793 1.414 1.414L19 6.414V11h2V3h-8z"})))};var c,s=o(5),r=(c=s)&&c.__esModule?c:{default:c};e.exports=t.default},631:function(e,t,o){},648:function(e,t,o){"use strict";o.r(t),o.d(t,"getPaymentRecommendationData",(function(){return h}));var n=o(0),c=o(2),s=o(7),r=o(32),a=o(4),i=o(23),m=o(22),l=o(11),d=o(18),u=o(630),p=o.n(u),_=(o(631),o(70)),w=o(17),O=o(551),g=o(560);const b="woocommerce_setting_payments_recommendations_hidden";function h(e){const{getOption:t,isResolving:o}=e(l.OPTIONS_STORE_NAME),{getSettings:n}=e(l.SETTINGS_STORE_NAME),{getRecommendedPlugins:c}=e(l.PLUGINS_STORE_NAME),{general:s={}}=n("general"),r=t("woocommerce_show_marketplace_suggestions"),a=t(b),i=s.woocommerce_default_country?Object(_.b)(s.woocommerce_default_country):null,m=!!i&&Object(g.d)(i),d=!(o("getOption",[b])||o("getOption",["woocommerce_show_marketplace_suggestions"]))&&"yes"!==a&&"yes"===r&&m;let u;return d&&(u=c("payments")),{displayable:d,recommendedPlugins:u}}t.default=()=>{const[e,t]=Object(n.useState)(null),{updateOptions:o}=Object(s.useDispatch)(l.OPTIONS_STORE_NAME),{installAndActivatePlugins:u}=Object(s.useDispatch)(l.PLUGINS_STORE_NAME),{displayable:_,recommendedPlugins:g}=Object(s.useSelect)(h),j=Object(n.useRef)(!1),y=_&&g&&g.length>0;if(Object(n.useEffect)(()=>{y&&!j.current&&(j.current=!0,Object(d.recordEvent)("settings_payments_recommendations_pageview",{}))},[y]),!y)return null;const f=()=>{Object(d.recordEvent)("settings_payments_recommendations_dismiss",{}),o({[b]:"yes"})},E=(g||[]).map(o=>({key:o.slug,title:Object(n.createElement)(n.Fragment,null,o.title,o.recommended&&Object(n.createElement)(i.Pill,null,Object(c.__)("Recommended","woocommerce-admin"))),content:Object(r.decodeEntities)(o.copy),after:Object(n.createElement)(a.Button,{isSecondary:!0,onClick:()=>(o=>{e||(t(o.product),Object(d.recordEvent)("settings_payments_recommendations_setup",{extension_selected:o.product}),u([o.product]).then(()=>{window.location.href=Object(w.g)(o["setup-link"].replace("/wp-admin/",""))}).catch(e=>{Object(O.a)(e),t(null)}))})(o),isBusy:e===o.product,disabled:!!e},o["button-text"]),before:Object(n.createElement)("img",{src:o.icon,alt:""})}));return Object(n.createElement)(a.Card,{size:"large",className:"woocommerce-recommended-payments-card"},Object(n.createElement)(a.CardHeader,{size:"medium"},Object(n.createElement)("div",{className:"woocommerce-recommended-payments-card__header"},Object(n.createElement)(m.Text,{variant:"title.small"},Object(c.__)("Recommended ways to get paid","woocommerce-admin")),Object(n.createElement)(m.Text,{className:"woocommerce-recommended-payments__header-heading",variant:"caption"},Object(c.__)('We recommend adding one of the following payment extensions to your store. The extension will be installed and activated for you when you click "Get started".',"woocommerce-admin"))),Object(n.createElement)("div",{className:"woocommerce-card__menu woocommerce-card__header-item"},Object(n.createElement)(i.EllipsisMenu,{label:Object(c.__)("Task List Options","woocommerce-admin"),renderContent:()=>Object(n.createElement)("div",{className:"woocommerce-review-activity-card__section-controls"},Object(n.createElement)(a.Button,{onClick:f},Object(c.__)("Hide this","woocommerce-admin")))}))),Object(n.createElement)(a.CardBody,null,Object(n.createElement)(i.List,{items:E})),Object(n.createElement)(a.CardFooter,null,Object(n.createElement)(a.Button,{href:"https://woocommerce.com/product-category/woocommerce-extensions/payment-gateways/?utm_source=payments_recommendations",target:"_blank",isTertiary:!0},Object(c.__)("See more options","woocommerce-admin"),Object(n.createElement)(p.a,{size:18}))))}}}]);