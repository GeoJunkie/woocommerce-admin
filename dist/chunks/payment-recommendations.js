(window.__wcAdmin_webpackJsonp=window.__wcAdmin_webpackJsonp||[]).push([[45,53],{503:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var c=n(7);function o(e){const{createNotice:t}=Object(c.dispatch)("core/notices");e.error_data&&e.errors&&Object.keys(e.errors).length?Object.keys(e.errors).forEach(n=>{t("error",e.errors[n].join(" "))}):e.message&&t(e.code?"error":"success",e.message)}},510:function(e,t,n){"use strict";var c=n(0),o=n(2),a=n(14),r=n(7),s=n(18),i=n.n(s),m=n(3),l=n(21),d=n(11),u=n(121);class p extends c.Component{constructor(e){super(e),this.state={isLoadingScripts:!1,isRequestStarted:!1}}async componentDidUpdate(e,t){const{hasErrors:n,isRequesting:c,onClose:a,onContinue:r,createNotice:s}=this.props,{isLoadingScripts:i,isRequestStarted:m}=this.state;if(!m)return;const l=!c&&!i&&(e.isRequesting||t.isLoadingScripts)&&!n,d=!c&&e.isRequesting&&n;l&&(a(),r()),d&&(s("error",Object(o.__)("There was a problem updating your preferences","woocommerce-admin")),a())}updateTracking({allowTracking:e}){const{updateOptions:t}=this.props;e&&"function"==typeof window.wcTracks.enable?(this.setState({isLoadingScripts:!0}),window.wcTracks.enable(()=>{this._isMounted&&(Object(u.initializeExPlat)(),this.setState({isLoadingScripts:!1}))})):e||(window.wcTracks.isEnabled=!1);const n=e?"yes":"no";this.setState({isRequestStarted:!0}),t({woocommerce_allow_tracking:n})}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const{allowTracking:e,isResolving:t,onClose:n,onContinue:a}=this.props;if(t)return null;if(e)return n(),a(),null;const{isRequesting:r,title:s=Object(o.__)("Build a better WooCommerce","woocommerce-admin"),message:d=i()({mixedString:Object(o.__)("Get improved features and faster fixes by sharing non-sensitive data via {{link}}usage tracking{{/link}} that shows us how WooCommerce is used. No personal data is tracked or stored.","woocommerce-admin"),components:{link:Object(c.createElement)(l.Link,{href:"https://woocommerce.com/usage-tracking?utm_medium=product",target:"_blank",type:"external"})}}),dismissActionText:u=Object(o.__)("No thanks","woocommerce-admin"),acceptActionText:p=Object(o.__)("Yes, count me in!","woocommerce-admin")}=this.props,{isRequestStarted:_}=this.state,b=_&&r;return Object(c.createElement)(m.Modal,{title:s,isDismissible:this.props.isDismissible,onRequestClose:()=>this.props.onClose(),className:"woocommerce-usage-modal"},Object(c.createElement)("div",{className:"woocommerce-usage-modal__wrapper"},Object(c.createElement)("div",{className:"woocommerce-usage-modal__message"},d),Object(c.createElement)("div",{className:"woocommerce-usage-modal__actions"},Object(c.createElement)(m.Button,{isSecondary:!0,isBusy:b,onClick:()=>this.updateTracking({allowTracking:!1})},u),Object(c.createElement)(m.Button,{isPrimary:!0,isBusy:b,onClick:()=>this.updateTracking({allowTracking:!0})},p))))}}t.a=Object(a.compose)(Object(r.withSelect)(e=>{const{getOption:t,getOptionsUpdatingError:n,isOptionsUpdating:c,hasFinishedResolution:o}=e(d.OPTIONS_STORE_NAME);return{allowTracking:"yes"===t("woocommerce_allow_tracking"),isRequesting:Boolean(c()),isResolving:!o("getOption",["woocommerce_allow_tracking"])||void 0===t("woocommerce_allow_tracking"),hasErrors:Boolean(n())}}),Object(r.withDispatch)(e=>{const{createNotice:t}=e("core/notices"),{updateOptions:n}=e(d.OPTIONS_STORE_NAME);return{createNotice:t,updateOptions:n}}))(p)},514:function(e,t,n){"use strict";n.r(t),n.d(t,"UsageModal",(function(){return l}));var c=n(0),o=n(2),a=n(12),r=n(18),s=n.n(r),i=n(21),m=n(510);const l=()=>{const e="1"===Object(a.getQuery)()["wcpay-connection-success"],[t,n]=Object(c.useState)(e);if(!t)return null;const r=()=>{n(!1),Object(a.updateQueryString)({"wcpay-connection-success":void 0})},l=Object(o.__)("Help us build a better WooCommerce Payments experience","woocommerce-admin"),d=s()({mixedString:Object(o.__)("By agreeing to share non-sensitive {{link}}usage data{{/link}}, you’ll help us improve features and optimize the WooCommerce Payments experience. You can opt out at any time.","woocommerce-admin"),components:{link:Object(c.createElement)(i.Link,{href:"https://woocommerce.com/usage-tracking?utm_medium=product",target:"_blank",type:"external"})}});return Object(c.createElement)(m.a,{isDismissible:!1,title:l,message:d,acceptActionText:Object(o.__)("I agree","woocommerce-admin"),dismissActionText:Object(o.__)("No thanks","woocommerce-admin"),onContinue:r,onClose:r})};t.default=l},522:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var c=n(0),o=n(2),a=n(3),r=n(12),s=n(16);const i=({hasSetup:e=!1,needsSetup:t=!0,id:n,isEnabled:i=!1,isLoading:m=!1,isInstalled:l=!1,isRecommended:d=!1,hasPlugins:u,manageUrl:p=null,markConfigured:_,onSetUp:b=(()=>{}),onSetupCallback:O,setupButtonText:g=Object(o.__)("Set up","woocommerce-admin")})=>{const[w,j]=Object(c.useState)(!1),h="woocommerce-task-payment__action";if(m)return Object(c.createElement)(a.Spinner,null);const y=async()=>{if(b(n),O)return j(!0),void await new Promise(O).then(()=>{j(!1)}).catch(()=>{j(!1)});Object(r.updateQueryString)({id:n})},E=()=>Object(c.createElement)(a.Button,{className:h,isSecondary:!0,role:"button",href:p,onClick:()=>Object(s.recordEvent)("tasklist_payment_manage",{id:n})},Object(o.__)("Manage","woocommerce-admin")),f=()=>Object(c.createElement)(a.Button,{className:h,isPrimary:d,isSecondary:!d,isBusy:w,disabled:w,onClick:()=>y()},g);return e?u?t?l&&u?Object(c.createElement)("div",null,Object(c.createElement)(a.Button,{className:h,isPrimary:d,isSecondary:!d,isBusy:w,disabled:w,onClick:()=>y()},Object(o.__)("Finish setup","woocommerce-admin"))):Object(c.createElement)(f,null):Object(c.createElement)(E,null):i?Object(c.createElement)(E,null):Object(c.createElement)(f,null):i?Object(c.createElement)(E,null):Object(c.createElement)(a.Button,{className:h,isSecondary:!0,onClick:()=>_(n)},Object(o.__)("Enable","woocommerce-admin"))}},523:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return j}));var c=n(2),o=n(17),a=n.n(o),r=n(11),s=n(16),i=n(503);function m(e,t,n){const o=Object(c.__)("There was an error connecting to WooCommerce Payments. Please try again or connect later in store settings.","woocommerce-admin");n(["woocommerce-payments"]).then(()=>{Object(s.recordEvent)("woocommerce_payments_install",{context:"tasklist"}),a()({path:r.WC_ADMIN_NAMESPACE+"/plugins/connect-wcpay",method:"POST"}).then(e=>{window.location=e.connectUrl}).catch(()=>{t("error",o),e()})}).catch(t=>{Object(i.a)(t),e()})}function l(e){return["US","PR","AU","CA","DE","ES","FR","GB","IE","IT","NZ","AT","BE","NL","PL","PT","CH","HK","SG"].includes(e)}var d=n(0),u=n(18),p=n.n(u),_=n(21),b=n(20),O=n(271),g=n(522);const w=()=>p()({mixedString:Object(c.__)('Upon clicking "Get started", you agree to the {{link}}Terms of service{{/link}}. Next we’ll ask you to share a few details about your business to create your account.',"woocommerce-admin"),components:{link:Object(d.createElement)(_.Link,{href:"https://wordpress.com/tos/",target:"_blank",type:"external"})}}),j=({paymentGateway:e,onSetupCallback:t=null})=>{const{description:n,id:o,needsSetup:a,installed:r,enabled:i,installed:m}=e;return Object(d.createElement)(O.WCPayCard,null,Object(d.createElement)(O.WCPayCardHeader,null,r&&a?Object(d.createElement)(O.SetupRequired,null):Object(d.createElement)(_.Pill,null,Object(c.__)("Recommended","woocommerce-admin"))),Object(d.createElement)(O.WCPayCardBody,{description:n,onLinkClick:()=>{Object(s.recordEvent)("tasklist_payment_learn_more")}}),Object(d.createElement)(O.WCPayCardFooter,null,Object(d.createElement)(d.Fragment,null,Object(d.createElement)(b.Text,{lineHeight:"1.5em"},Object(d.createElement)(w,null)),Object(d.createElement)(g.a,{id:o,hasSetup:!0,needsSetup:a,isEnabled:i,isRecommended:!0,isInstalled:m,hasPlugins:!0,setupButtonText:Object(c.__)("Get started","woocommerce-admin"),onSetupCallback:t}))))};n(514)},541:function(e,t,n){"use strict";var c=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var c in t=arguments[n])Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.size,o=void 0===n?24:n,a=e.onClick,s=(e.icon,e.className),i=function(e,t){var n={};for(var c in e)0<=t.indexOf(c)||Object.prototype.hasOwnProperty.call(e,c)&&(n[c]=e[c]);return n}(e,["size","onClick","icon","className"]),m=["gridicon","gridicons-external",s,(t=o,!(0!=t%18)&&"needs-offset"),!1,!1].filter(Boolean).join(" ");return r.default.createElement("svg",c({className:m,height:o,width:o,onClick:a},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.default.createElement("g",null,r.default.createElement("path",{d:"M19 13v6c0 1.105-.895 2-2 2H5c-1.105 0-2-.895-2-2V7c0-1.105.895-2 2-2h6v2H5v12h12v-6h2zM13 3v2h4.586l-7.793 7.793 1.414 1.414L19 6.414V11h2V3h-8z"})))};var o,a=n(5),r=(o=a)&&o.__esModule?o:{default:o};e.exports=t.default},596:function(e,t,n){},625:function(e,t,n){"use strict";n.r(t),n.d(t,"getPaymentRecommendationData",(function(){return j}));var c=n(0),o=n(2),a=n(7),r=n(28),s=n(3),i=n(21),m=n(20),l=n(11),d=n(16),u=n(541),p=n.n(u),_=n(13),b=(n(596),n(60)),O=n(503),g=n(523);const w="woocommerce_setting_payments_recommendations_hidden";function j(e){const{getOption:t,isResolving:n}=e(l.OPTIONS_STORE_NAME),{getSettings:c}=e(l.SETTINGS_STORE_NAME),{getRecommendedPlugins:o}=e(l.PLUGINS_STORE_NAME),{general:a}=c("general"),r=t(w),s=a&&a.woocommerce_default_country?Object(b.b)(a.woocommerce_default_country):null,i=!!s&&Object(g.c)(s),m=n("getOption",[w]),d=!m&&"yes"!==r&&i;let u=null;d&&(u=o("payments"));return{displayable:d,recommendedPlugins:u,isLoading:m||void 0===r||void 0===a||void 0===u}}const h=document.querySelector('[data-gateway_id="pre_install_woocommerce_payments_promotion"]');t.default=()=>{const[e,t]=Object(c.useState)(null),{updateOptions:n}=Object(a.useDispatch)(l.OPTIONS_STORE_NAME),{installAndActivatePlugins:u}=Object(a.useDispatch)(l.PLUGINS_STORE_NAME),{displayable:b,recommendedPlugins:g,isLoading:y}=Object(a.useSelect)(j),E=Object(c.useRef)(!1),f=b&&g&&g.length>0;if(Object(c.useEffect)(()=>{if((f||h&&!y)&&!E.current){E.current=!0;const e=(g||[]).reduce((e,t)=>t.product?{...e,[t.product.replace(/\-/g,"_")+"_displayed"]:!0}:e,{woocommerce_payments_displayed:!!h});Object(d.recordEvent)("settings_payments_recommendations_pageview",e)}},[f,h,y]),!f)return null;const k=()=>{Object(d.recordEvent)("settings_payments_recommendations_dismiss",{}),n({[w]:"yes"})},S=(g||[]).map(n=>({key:n.slug,title:Object(c.createElement)(c.Fragment,null,n.title,n.recommended&&Object(c.createElement)(i.Pill,null,Object(o.__)("Recommended","woocommerce-admin"))),content:Object(r.decodeEntities)(n.copy),after:Object(c.createElement)(s.Button,{isSecondary:!0,onClick:()=>(n=>{e||(t(n.product),Object(d.recordEvent)("settings_payments_recommendations_setup",{extension_selected:n.product}),u([n.product]).then(()=>{window.location.href=Object(_.e)(n["setup-link"].replace("/wp-admin/",""))}).catch(e=>{Object(O.a)(e),t(null)}))})(n),isBusy:e===n.product,disabled:!!e},n["button-text"]),before:Object(c.createElement)("img",{src:n.icon,alt:""})}));return Object(c.createElement)(s.Card,{size:"medium",className:"woocommerce-recommended-payments-card"},Object(c.createElement)(s.CardHeader,null,Object(c.createElement)("div",{className:"woocommerce-recommended-payments-card__header"},Object(c.createElement)(m.Text,{variant:"title.small",as:"p",size:"20",lineHeight:"28px"},Object(o.__)("Recommended ways to get paid","woocommerce-admin")),Object(c.createElement)(m.Text,{className:"woocommerce-recommended-payments__header-heading",variant:"caption",as:"p",size:"12",lineHeight:"16px"},Object(o.__)('We recommend adding one of the following payment extensions to your store. The extension will be installed and activated for you when you click "Get started".',"woocommerce-admin"))),Object(c.createElement)("div",{className:"woocommerce-card__menu woocommerce-card__header-item"},Object(c.createElement)(i.EllipsisMenu,{label:Object(o.__)("Task List Options","woocommerce-admin"),renderContent:()=>Object(c.createElement)("div",{className:"woocommerce-review-activity-card__section-controls"},Object(c.createElement)(s.Button,{onClick:k},Object(o.__)("Hide this","woocommerce-admin")))}))),Object(c.createElement)(i.List,{items:S}),Object(c.createElement)(s.CardFooter,null,Object(c.createElement)(s.Button,{href:"https://woocommerce.com/product-category/woocommerce-extensions/payment-gateways/?utm_source=payments_recommendations",target:"_blank",isTertiary:!0},Object(o.__)("See more options","woocommerce-admin"),Object(c.createElement)(p.a,{size:18}))))}}}]);