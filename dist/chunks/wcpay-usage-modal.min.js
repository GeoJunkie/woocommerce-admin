(window.__wcAdmin_webpackJsonp=window.__wcAdmin_webpackJsonp||[]).push([[54],{574:function(e,t,n){"use strict";n.r(t);var o=n(18),i=n.n(o),c=n(0),r=n(2),a=n(22),s=n(30),u=n.n(s),m=n(34),l=n(575);t.default=function(){var e="1"===Object(a.getQuery)()["wcpay-connection-success"],t=Object(c.useState)(e),n=i()(t,2),o=n[0],s=n[1];if(!o)return null;var p=function(){s(!1),Object(a.updateQueryString)({"wcpay-connection-success":void 0})},d=Object(r.__)("Help us build a better WooCommerce Payments experience","woocommerce-admin"),f=u()({mixedString:Object(r.__)("By agreeing to share non-sensitive {{link}}usage data{{/link}}, youâ€™ll help us improve features and optimize the WooCommerce Payments experience. You can opt out at any time.","woocommerce-admin"),components:{link:Object(c.createElement)(m.Link,{href:"https://woocommerce.com/usage-tracking",target:"_blank",type:"external"})}});return Object(c.createElement)(l.a,{isDismissible:!1,title:d,message:f,acceptActionText:Object(r.__)("I agree","woocommerce-admin"),dismissActionText:Object(r.__)("No thanks","woocommerce-admin"),onContinue:p,onClose:p})}},575:function(e,t,n){"use strict";var o=n(38),i=n.n(o),c=n(13),r=n.n(c),a=n(14),s=n.n(a),u=n(15),m=n.n(u),l=n(16),p=n.n(l),d=n(9),f=n.n(d),w=n(0),g=n(6),h=n.n(g),_=n(2),b=n(25),k=n(11),O=n(30),v=n.n(O),y=n(4),j=n(34),S=n(21),T=n(162);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return p()(this,n)}}var R=function(e){m()(o,e);var t,n=E(o);function o(e){var t;return r()(this,o),(t=n.call(this,e)).state={isLoadingScripts:!1,isRequestStarted:!1},t}return s()(o,[{key:"componentDidUpdate",value:(t=i()(h.a.mark((function e(t,n){var o,i,c,r,a,s,u,m,l,p;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.props,i=o.hasErrors,c=o.isRequesting,r=o.onClose,a=o.onContinue,s=o.createNotice,u=this.state,m=u.isLoadingScripts,u.isRequestStarted){e.next=4;break}return e.abrupt("return");case 4:l=!c&&!m&&(t.isRequesting||n.isLoadingScripts)&&!i,p=!c&&t.isRequesting&&i,l&&(r(),a()),p&&(s("error",Object(_.__)("There was a problem updating your preferences","woocommerce-admin")),r());case 8:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"updateTracking",value:function(e){var t=this,n=e.allowTracking,o=this.props.updateOptions;n&&"function"==typeof window.wcTracks.enable?(this.setState({isLoadingScripts:!0}),window.wcTracks.enable((function(){t._isMounted&&(Object(T.initializeExPlat)(),t.setState({isLoadingScripts:!1}))}))):n||(window.wcTracks.isEnabled=!1);var i=n?"yes":"no";this.setState({isRequestStarted:!0}),o({woocommerce_allow_tracking:i})}},{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;if(this.props.allowTracking){var t=this.props,n=t.onClose,o=t.onContinue;return n(),o(),null}var i=this.props,c=i.isRequesting,r=i.title,a=void 0===r?Object(_.__)("Build a better WooCommerce","woocommerce-admin"):r,s=i.message,u=void 0===s?v()({mixedString:Object(_.__)("Get improved features and faster fixes by sharing non-sensitive data via {{link}}usage tracking{{/link}} that shows us how WooCommerce is used. No personal data is tracked or stored.","woocommerce-admin"),components:{link:Object(w.createElement)(j.Link,{href:"https://woocommerce.com/usage-tracking",target:"_blank",type:"external"})}}):s,m=i.dismissActionText,l=void 0===m?Object(_.__)("No thanks","woocommerce-admin"):m,p=i.acceptActionText,d=void 0===p?Object(_.__)("Yes, count me in!","woocommerce-admin"):p,f=this.state.isRequestStarted&&c;return Object(w.createElement)(y.Modal,{title:a,isDismissible:this.props.isDismissible,onRequestClose:function(){return e.props.onClose()},className:"woocommerce-usage-modal"},Object(w.createElement)("div",{className:"woocommerce-usage-modal__wrapper"},Object(w.createElement)("div",{className:"woocommerce-usage-modal__message"},u),Object(w.createElement)("div",{className:"woocommerce-usage-modal__actions"},Object(w.createElement)(y.Button,{isSecondary:!0,isBusy:f,onClick:function(){return e.updateTracking({allowTracking:!1})}},l),Object(w.createElement)(y.Button,{isPrimary:!0,isBusy:f,onClick:function(){return e.updateTracking({allowTracking:!0})}},d))))}}]),o}(w.Component);t.a=Object(b.compose)(Object(k.withSelect)((function(e){var t=e(S.OPTIONS_STORE_NAME),n=t.getOption,o=t.getOptionsUpdatingError,i=t.isOptionsUpdating;return{allowTracking:"yes"===n("woocommerce_allow_tracking"),isRequesting:Boolean(i()),hasErrors:Boolean(o())}})),Object(k.withDispatch)((function(e){return{createNotice:e("core/notices").createNotice,updateOptions:e(S.OPTIONS_STORE_NAME).updateOptions}})))(R)}}]);